{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gorkem.Cadirci\\\\talep-sistemi\\\\src\\\\pages\\\\Inbox.js\",\n  _s = $RefreshSig$();\n// src/pages/Inbox.js\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\nimport supabase from \"../supabaseClient\";\nimport \"./Inbox.css\";\n\n/** DB anahtar -> ekranda görünen */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS_DISPLAY = {\n  Yeni: \"Yeni\",\n  Inceleme: \"İnceleme\",\n  Atandi: \"Atandı\",\n  Calisiliyor: \"Çalışılıyor\",\n  Beklemede: \"Beklemede\",\n  Tamamlandi: \"Tamamlandı\"\n};\nconst BOARD_COLUMNS = [{\n  key: \"Yeni\",\n  title: \"Yeni\"\n}, {\n  key: \"Inceleme\",\n  title: \"İnceleme\"\n}, {\n  key: \"Atandi\",\n  title: \"Atandı\"\n}, {\n  key: \"Calisiliyor\",\n  title: \"Çalışılıyor\"\n}, {\n  key: \"Beklemede\",\n  title: \"Beklemede\"\n}, {\n  key: \"Tamamlandi\",\n  title: \"Tamamlandı\"\n}];\nconst PILL_COLOR = {\n  P1: \"p1\",\n  P2: \"p2\",\n  P3: \"p3\"\n};\nexport default function InboxModern() {\n  _s();\n  const navigate = useNavigate();\n  const me = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\");\n    } catch {\n      return {};\n    }\n  }, []);\n  const myEmail = (me === null || me === void 0 ? void 0 : me.email) || \"\";\n  const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\n  const [q, setQ] = useState(\"\");\n  const [mineOnly, setMineOnly] = useState(false);\n  const [onlySLA, setOnlySLA] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const [rows, setRows] = useState([]);\n  const [active, setActive] = useState(null);\n\n  // 🔻 Throttle için kuyruk\n  const flushTimer = useRef(null);\n  const queued = useRef(new Map()); // id -> {id, durum?, kolon_sira?, atanan_sira?}\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"auth_token\");\n    if (!token) navigate(\"/login\", {\n      replace: true\n    });\n  }, [navigate]);\n  useEffect(() => {\n    fetchData(); /* eslint-disable-next-line */\n  }, [mineOnly, onlySLA]);\n\n  // 🔴 Realtime — herkes anında görsün\n  useEffect(() => {\n    const ch = supabase.channel(\"realtime:talepler\").on(\"postgres_changes\", {\n      event: \"*\",\n      schema: \"public\",\n      table: \"talepler\"\n    }, payload => {\n      setRows(prev => {\n        var _payload$new;\n        const row = (_payload$new = payload.new) !== null && _payload$new !== void 0 ? _payload$new : payload.old;\n        if (!(row !== null && row !== void 0 && row.id)) return prev;\n        if (payload.eventType === \"DELETE\") {\n          return prev.filter(x => x.id !== row.id);\n        }\n        const i = prev.findIndex(x => x.id === row.id);\n        if (i >= 0) {\n          const next = [...prev];\n          next[i] = {\n            ...next[i],\n            ...payload.new\n          };\n          return next;\n        }\n        return [...prev, payload.new];\n      });\n    }).subscribe();\n    return () => {\n      try {\n        supabase.removeChannel(ch);\n      } catch {}\n    };\n  }, []);\n  async function fetchData() {\n    if (!myEmail) return;\n    setLoading(true);\n    setErr(\"\");\n    try {\n      const now = new Date();\n      let query = supabase.from(\"talepler\").select(`\n        id, baslik, durum, oncelik, talep_eden_email, atanan_email,\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama,\n        kolon_sira, atanan_sira\n      `);\n      if (mineOnly) {\n        query = query.eq(\"atanan_email\", myEmail).order(\"atanan_sira\", {\n          ascending: true,\n          nullsFirst: false\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      } else {\n        query = query.order(\"kolon_sira\", {\n          ascending: true,\n          nullsFirst: true\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      }\n      if (onlySLA) {\n        const t24 = new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString();\n        query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", [\"Tamamlandi\", \"Reddedildi\"]);\n      }\n      const {\n        data,\n        error\n      } = await query.limit(500);\n      if (error) throw error;\n      setRows(data || []);\n    } catch (e) {\n      console.error(e);\n      setErr(\"Kayıtlar çekilemedi.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  /* ---------- yardımcılar ---------- */\n  function groupByStatus(items) {\n    const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\n    items.forEach(i => {\n      (map[i.durum || \"Yeni\"] ??= []).push(i);\n    });\n    return map;\n  }\n\n  // sırayı sadece ilgili kolon(lar) için yeniden hesapla\n  function recomputeColumnOrder(map, keys) {\n    keys.forEach(k => {\n      (map[k] || []).forEach((it, idx) => {\n        it.kolon_sira = idx + 1;\n      });\n    });\n  }\n\n  // throttle ile kuyruğa ekle ve 250ms sonra yaz\n  function queuePersist(upds) {\n    upds.forEach(u => {\n      const prev = queued.current.get(u.id) || {};\n      queued.current.set(u.id, {\n        ...prev,\n        ...u\n      }); // merge\n    });\n    if (!flushTimer.current) {\n      flushTimer.current = setTimeout(async () => {\n        const payload = Array.from(queued.current.values()).map(u => ({\n          id: u.id,\n          ...(u.durum !== undefined ? {\n            durum: u.durum\n          } : {}),\n          ...(u.kolon_sira !== undefined ? {\n            kolon_sira: u.kolon_sira\n          } : {}),\n          ...(u.atanan_sira !== undefined ? {\n            atanan_sira: u.atanan_sira\n          } : {}),\n          guncelleme_tarihi: new Date().toISOString()\n        }));\n        queued.current.clear();\n        flushTimer.current = null;\n        if (payload.length) {\n          const {\n            error\n          } = await supabase.from(\"talepler\").upsert(payload, {\n            onConflict: \"id\"\n          });\n          if (error) console.error(\"realtime-save error\", error);\n        }\n      }, 250);\n    }\n  }\n  async function persistOrder(updates) {\n    if (!(updates !== null && updates !== void 0 && updates.length)) return;\n    const payload = updates.map(u => ({\n      id: u.id,\n      ...(u.durum !== undefined ? {\n        durum: u.durum\n      } : {}),\n      ...(u.kolon_sira !== undefined ? {\n        kolon_sira: u.kolon_sira\n      } : {}),\n      ...(u.atanan_sira !== undefined ? {\n        atanan_sira: u.atanan_sira\n      } : {}),\n      guncelleme_tarihi: new Date().toISOString()\n    }));\n    const {\n      error\n    } = await supabase.from(\"talepler\").upsert(payload, {\n      onConflict: \"id\"\n    });\n    if (error) console.error(\"order save error\", error);\n  }\n\n  /* ---------- DnD: KANBAN anlık (update) + final (end) ---------- */\n  function onBoardDragUpdate(update) {\n    const {\n      source,\n      destination,\n      draggableId\n    } = update;\n    if (!destination) return;\n    const from = source.droppableId;\n    const to = destination.droppableId;\n\n    // rows üzerinde simülasyon\n    const map = groupByStatus(rows.map(r => ({\n      ...r\n    })));\n    const fromArr = map[from] || [];\n    const toArr = map[to] || [];\n\n    // kaydırılan öğeyi \"mevcut listedeki\" sırasına göre bul\n    const movingIdx = fromArr.findIndex(i => String(i.id) === String(draggableId));\n    if (movingIdx === -1) return;\n    const moving = fromArr.splice(movingIdx, 1)[0];\n    moving.durum = to;\n\n    // hedefe geçici yerleştir\n    const destIndex = Math.min(destination.index, toArr.length);\n    toArr.splice(destIndex, 0, moving);\n\n    // sadece etkilenen kolonları sırala\n    recomputeColumnOrder(map, from === to ? [to] : [from, to]);\n\n    // etkilenen kayıtlar için güncellemeleri çıkar\n    const updates = [];\n    (map[from] || []).forEach((it, idx) => updates.push({\n      id: it.id,\n      kolon_sira: idx + 1,\n      ...(it.id === moving.id ? {\n        durum: it.durum\n      } : {})\n    }));\n    if (from !== to) {\n      (map[to] || []).forEach((it, idx) => updates.push({\n        id: it.id,\n        kolon_sira: idx + 1,\n        ...(it.id === moving.id ? {\n          durum: it.durum\n        } : {})\n      }));\n    }\n\n    // throttle ile yaz (drop beklemeden)\n    queuePersist(updates);\n  }\n  async function onBoardDragEnd(result) {\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    const statusFrom = source.droppableId;\n    const statusTo = destination.droppableId;\n    const byStatus = groupByStatus([...rows]);\n    const idx = byStatus[statusFrom].findIndex(i => String(i.id) === String(draggableId));\n    if (idx === -1) return;\n    const item = byStatus[statusFrom][idx];\n    byStatus[statusFrom].splice(idx, 1);\n    byStatus[statusTo].splice(destination.index, 0, item);\n    item.durum = statusTo;\n\n    // kolon sıraları\n    BOARD_COLUMNS.forEach(col => {\n      byStatus[col.key].forEach((it, i) => {\n        it.kolon_sira = i + 1;\n      });\n    });\n    const flattened = BOARD_COLUMNS.flatMap(c => byStatus[c.key]);\n    setRows(flattened); // optimistic\n\n    // final kaydet\n    await persistOrder([statusFrom, statusTo].flatMap(k => (byStatus[k] || []).map((it, i) => ({\n      id: it.id,\n      durum: it.durum,\n      kolon_sira: i + 1\n    }))));\n  }\n\n  /* ---------- DnD: LİSTE (Bana atananlar) anlık + final ---------- */\n  function onListDragUpdate(update) {\n    const {\n      destination,\n      draggableId\n    } = update;\n    if (!destination || !mineOnly) return;\n\n    // görünür listedeki (sadece bana atanmış) sıralama\n    const list = rows.filter(r => r.atanan_email === myEmail).map(r => ({\n      ...r\n    })).sort((a, b) => {\n      var _a$atanan_sira, _b$atanan_sira;\n      return ((_a$atanan_sira = a.atanan_sira) !== null && _a$atanan_sira !== void 0 ? _a$atanan_sira : 999999) - ((_b$atanan_sira = b.atanan_sira) !== null && _b$atanan_sira !== void 0 ? _b$atanan_sira : 999999);\n    });\n    const from = list.findIndex(i => String(i.id) === String(draggableId));\n    if (from === -1) return;\n    const moved = list.splice(from, 1)[0];\n    const destIndex = Math.min(destination.index, list.length);\n    list.splice(destIndex, 0, moved);\n\n    // yeni 1..N\n    list.forEach((r, i) => {\n      r.atanan_sira = i + 1;\n    });\n\n    // sadece kuyruktaki kayıtları gönder\n    queuePersist(list.map(r => ({\n      id: r.id,\n      atanan_sira: r.atanan_sira\n    })));\n  }\n  async function onListDragEnd(result) {\n    const {\n      destination,\n      draggableId\n    } = result;\n    if (!destination || !mineOnly) return;\n\n    // final liste\n    const list = rows.filter(r => r.atanan_email === myEmail).map(r => ({\n      ...r\n    })).sort((a, b) => {\n      var _a$atanan_sira2, _b$atanan_sira2;\n      return ((_a$atanan_sira2 = a.atanan_sira) !== null && _a$atanan_sira2 !== void 0 ? _a$atanan_sira2 : 999999) - ((_b$atanan_sira2 = b.atanan_sira) !== null && _b$atanan_sira2 !== void 0 ? _b$atanan_sira2 : 999999);\n    });\n    const from = list.findIndex(i => String(i.id) === String(draggableId));\n    if (from === -1) return;\n    const moved = list.splice(from, 1)[0];\n    list.splice(destination.index, 0, moved);\n    list.forEach((r, i) => {\n      r.atanan_sira = i + 1;\n    });\n\n    // optimistic\n    const next = rows.map(r => {\n      const hit = list.find(x => x.id === r.id);\n      return hit ? {\n        ...r,\n        atanan_sira: hit.atanan_sira\n      } : r;\n    });\n    setRows(next);\n    await persistOrder(list.map(({\n      id,\n      atanan_sira\n    }) => ({\n      id,\n      atanan_sira\n    })));\n  }\n\n  /* ---------- tek aksiyon: Üstlen ---------- */\n  async function takeOwnership(id) {\n    if (!myEmail) return;\n    const myColMax = rows.filter(r => r.durum === \"Inceleme\").reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\n    const myQueueMax = rows.filter(r => r.atanan_email === myEmail).reduce((m, r) => Math.max(m, r.atanan_sira || 0), 0) + 1;\n    const {\n      error\n    } = await supabase.from(\"talepler\").update({\n      atanan_email: myEmail,\n      durum: \"Inceleme\",\n      kolon_sira: myColMax,\n      atanan_sira: myQueueMax,\n      guncelleme_tarihi: new Date().toISOString()\n    }).eq(\"id\", id);\n    if (!error) fetchData();\n  }\n  function handleLogout() {\n    localStorage.removeItem(\"auth_token\");\n    localStorage.removeItem(\"user_profile\");\n    navigate(\"/login\", {\n      replace: true\n    });\n  }\n\n  /* ---------- filter ---------- */\n  const filtered = rows.filter(r => {\n    if (!q) return true;\n    const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"}`.toLowerCase();\n    return text.includes(q.toLowerCase());\n  });\n  const grouped = groupByStatus(filtered);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: \"\\uD83E\\uDDED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bt\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Gelen Kutusu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"muted\",\n            children: \"\\u0130\\u015F & S\\xFCre\\xE7 Geli\\u015Ftirme\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cmd\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seg\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"board\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"board\"),\n            children: \"Kanban\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"list\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"list\"),\n            children: \"Liste\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"search\",\n            placeholder: \"Ara: #id, ba\\u015Fl\\u0131k, ki\\u015Fi\\u2026\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toggles\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: mineOnly,\n              onChange: e => setMineOnly(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Bana atananlar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: onlySLA,\n              onChange: e => setOnlySLA(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"SLA (<24s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/newrequest\",\n          className: \"btn primary\",\n          children: \"+ Yeni Talep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chip\",\n          children: (me === null || me === void 0 ? void 0 : me.kullanici) || (me === null || me === void 0 ? void 0 : me.email)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn danger\",\n          onClick: handleLogout,\n          children: \"\\xC7\\u0131k\\u0131\\u015F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-alert err\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 21\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-skel\",\n      children: \"Y\\xFCkleniyor\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }, this) : view === \"board\" ? /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragUpdate: onBoardDragUpdate,\n      onDragEnd: onBoardDragEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: BOARD_COLUMNS.map(col => {\n          const items = grouped[col.key] || [];\n          // Drag sırasında görsel sıralamayı kütüphane hallediyor; biz sadece render ediyoruz\n          return /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: col.key,\n            children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              ref: provided.innerRef,\n              ...provided.droppableProps,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-head\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `dot s-${slug(col.title)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: col.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"count\",\n                  children: items.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-body\",\n                children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-empty\",\n                  children: \"Hen\\xFCz kay\\u0131t yok\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 72\n                }, this), items.map((item, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                  draggableId: String(item.id),\n                  index: index,\n                  children: pp => {\n                    var _item$kolon_sira;\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      ref: pp.innerRef,\n                      ...pp.draggableProps,\n                      ...pp.dragHandleProps,\n                      children: /*#__PURE__*/_jsxDEV(Card, {\n                        data: item,\n                        rank: ((_item$kolon_sira = item.kolon_sira) !== null && _item$kolon_sira !== void 0 ? _item$kolon_sira : index) + 1,\n                        onOpen: () => setActive(item),\n                        onTake: () => takeOwnership(item.id),\n                        me: myEmail\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 393,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 61\n                    }, this);\n                  }\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 53\n                }, this)), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 41\n            }, this)\n          }, col.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 17\n    }, this) :\n    /*#__PURE__*/\n    // LISTE GÖRÜNÜMÜ — mineOnly açıkken sürükleyerek atanan_sira değiştir\n    _jsxDEV(DragDropContext, {\n      onDragUpdate: onListDragUpdate,\n      onDragEnd: onListDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: \"listMine\",\n        isDropDisabled: !mineOnly,\n        children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listv\",\n          ref: provided.innerRef,\n          ...provided.droppableProps,\n          children: [filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-empty\",\n            children: \"Kay\\u0131t bulunamad\\u0131\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 59\n          }, this), filtered.map((r, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: String(r.id),\n            index: index,\n            isDragDisabled: !mineOnly,\n            children: pp => {\n              var _r$atanan_sira;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: pp.innerRef,\n                ...pp.draggableProps,\n                ...pp.dragHandleProps,\n                className: \"rowv\",\n                onClick: () => setActive(r),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `pill ${PILL_COLOR[r.oncelik] || \"p3\"}`,\n                  children: r.oncelik || \"P3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`,\n                  children: STATUS_DISPLAY[r.durum] || \"Yeni\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-title\",\n                  children: [\"#\", r.id, \" \\u2014 \", r.baslik]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-sub\",\n                  children: [r.talep_eden_email, \" \\u2192 \", r.atanan_email || \"—\", mineOnly && r.atanan_email === myEmail && /*#__PURE__*/_jsxDEV(\"b\", {\n                    style: {\n                      marginLeft: 8,\n                      opacity: .8\n                    },\n                    children: [\"(S\\u0131ra: \", (_r$atanan_sira = r.atanan_sira) !== null && _r$atanan_sira !== void 0 ? _r$atanan_sira : \"—\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-time\",\n                  children: fmtTime(r.guncelleme_tarihi)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 45\n              }, this);\n            }\n          }, r.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 37\n          }, this)), provided.placeholder, !mineOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hint\",\n            style: {\n              padding: 8,\n              opacity: .7\n            },\n            children: \"Listeyi s\\xFCr\\xFCkleyerek s\\u0131ralamak i\\xE7in \\u201CBana atananlar\\u201D\\u0131 i\\u015Faretleyin.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 17\n    }, this), active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drawer\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"drawer-close\",\n          onClick: () => setActive(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `pill ${PILL_COLOR[active.oncelik] || \"p3\"}`,\n            children: active.oncelik || \"P3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`,\n            children: STATUS_DISPLAY[active.durum] || \"Yeni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"#\", active.id, \" \\u2014 \", active.baslik]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-sub\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u0130steyen: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.talep_eden_email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Atanan: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.atanan_email || \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"G\\xFCncellendi: \", fmtTime(active.guncelleme_tarihi)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-body\",\n          children: [/*#__PURE__*/_jsxDEV(Section, {\n            title: \"A\\xE7\\u0131klama\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"desc\",\n              children: active.aciklama || \"Açıklama girilmemiş.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 29\n          }, this), !active.atanan_email && /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Atama\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn primary\",\n              onClick: () => {\n                setActive(null);\n                takeOwnership(active.id);\n              },\n              children: \"\\xDCstlen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Zaman\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"kv\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hedef Tarih:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 67\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"SLA Son:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-backdrop\",\n        onClick: () => setActive(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 330,\n    columnNumber: 9\n  }, this);\n}\n\n/* components */\n_s(InboxModern, \"Tu/DhErgk7RWYeLgkn0rjXQu4cw=\", false, function () {\n  return [useNavigate];\n});\n_c = InboxModern;\nfunction Card({\n  data,\n  rank,\n  onOpen,\n  onTake,\n  me\n}) {\n  const mine = data.atanan_email && data.atanan_email === me;\n  const slaSoon = data.sla_son_tarih && new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `card ${mine ? \"mine\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `pill ${PILL_COLOR[data.oncelik] || \"p3\"}`,\n        children: data.oncelik || \"P3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`,\n        children: STATUS_DISPLAY[data.durum] || \"Yeni\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 17\n      }, this), slaSoon && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sla\",\n        children: \"SLA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        title: \"Bu kolondaki s\\u0131ra\",\n        style: {\n          marginLeft: \"auto\",\n          fontSize: 12,\n          opacity: .75\n        },\n        children: [\"#\", rank]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icn\",\n        onClick: onOpen,\n        title: \"Detay\",\n        children: \"\\u22EF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-title\",\n      children: [\"#\", data.id, \" \\u2014 \", data.baslik]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-sub\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.talep_eden_email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.atanan_email || \"—\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-foot\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"time\",\n        children: fmtTime(data.guncelleme_tarihi)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"act\",\n        children: !data.atanan_email && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: onTake,\n          children: \"\\xDCstlen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 507,\n    columnNumber: 9\n  }, this);\n}\n_c2 = Card;\nfunction Section({\n  title,\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sec\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-h\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-b\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 535,\n    columnNumber: 9\n  }, this);\n}\n\n/* utils */\n_c3 = Section;\nfunction slug(s) {\n  return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\");\n}\nfunction fmtTime(ts) {\n  try {\n    return new Date(ts).toLocaleString();\n  } catch {\n    return \"—\";\n  }\n}\nfunction fmtDate(ts) {\n  try {\n    return new Date(ts).toLocaleDateString();\n  } catch {\n    return \"—\";\n  }\n}\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"InboxModern\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Section\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useNavigate","Link","DragDropContext","Droppable","Draggable","supabase","jsxDEV","_jsxDEV","STATUS_DISPLAY","Yeni","Inceleme","Atandi","Calisiliyor","Beklemede","Tamamlandi","BOARD_COLUMNS","key","title","PILL_COLOR","P1","P2","P3","InboxModern","_s","navigate","me","JSON","parse","localStorage","getItem","myEmail","email","view","setView","q","setQ","mineOnly","setMineOnly","onlySLA","setOnlySLA","loading","setLoading","err","setErr","rows","setRows","active","setActive","flushTimer","queued","Map","token","replace","fetchData","ch","channel","on","event","schema","table","payload","prev","_payload$new","row","new","old","id","eventType","filter","x","i","findIndex","next","subscribe","removeChannel","now","Date","query","from","select","eq","order","ascending","nullsFirst","t24","getTime","toISOString","lt","not","data","error","limit","e","console","groupByStatus","items","map","Object","fromEntries","c","forEach","durum","push","recomputeColumnOrder","keys","k","it","idx","kolon_sira","queuePersist","upds","u","current","get","set","setTimeout","Array","values","undefined","atanan_sira","guncelleme_tarihi","clear","length","upsert","onConflict","persistOrder","updates","onBoardDragUpdate","update","source","destination","draggableId","droppableId","to","r","fromArr","toArr","movingIdx","String","moving","splice","destIndex","Math","min","index","onBoardDragEnd","result","statusFrom","statusTo","byStatus","item","col","flattened","flatMap","onListDragUpdate","list","atanan_email","sort","a","b","_a$atanan_sira","_b$atanan_sira","moved","onListDragEnd","_a$atanan_sira2","_b$atanan_sira2","hit","find","takeOwnership","myColMax","reduce","m","max","myQueueMax","handleLogout","removeItem","filtered","text","baslik","talep_eden_email","toLowerCase","includes","grouped","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","type","checked","kullanici","onDragUpdate","onDragEnd","provided","ref","innerRef","droppableProps","slug","pp","_item$kolon_sira","draggableProps","dragHandleProps","Card","rank","onOpen","onTake","isDropDisabled","isDragDisabled","_r$atanan_sira","oncelik","style","marginLeft","opacity","fmtTime","padding","role","Section","aciklama","bitis_tarihi","fmtDate","sla_son_tarih","_c","mine","slaSoon","fontSize","_c2","_c3","s","replaceAll","ts","toLocaleString","toLocaleDateString","$RefreshReg$"],"sources":["C:/Users/Gorkem.Cadirci/talep-sistemi/src/pages/Inbox.js"],"sourcesContent":["// src/pages/Inbox.js\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\r\nimport supabase from \"../supabaseClient\";\r\nimport \"./Inbox.css\";\r\n\r\n/** DB anahtar -> ekranda görünen */\r\nconst STATUS_DISPLAY = {\r\n    Yeni: \"Yeni\",\r\n    Inceleme: \"İnceleme\",\r\n    Atandi: \"Atandı\",\r\n    Calisiliyor: \"Çalışılıyor\",\r\n    Beklemede: \"Beklemede\",\r\n    Tamamlandi: \"Tamamlandı\",\r\n};\r\n\r\nconst BOARD_COLUMNS = [\r\n    { key: \"Yeni\", title: \"Yeni\" },\r\n    { key: \"Inceleme\", title: \"İnceleme\" },\r\n    { key: \"Atandi\", title: \"Atandı\" },\r\n    { key: \"Calisiliyor\", title: \"Çalışılıyor\" },\r\n    { key: \"Beklemede\", title: \"Beklemede\" },\r\n    { key: \"Tamamlandi\", title: \"Tamamlandı\" },\r\n];\r\n\r\nconst PILL_COLOR = { P1: \"p1\", P2: \"p2\", P3: \"p3\" };\r\n\r\nexport default function InboxModern() {\r\n    const navigate = useNavigate();\r\n\r\n    const me = useMemo(() => {\r\n        try { return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\"); }\r\n        catch { return {}; }\r\n    }, []);\r\n    const myEmail = me?.email || \"\";\r\n\r\n    const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\r\n    const [q, setQ] = useState(\"\");\r\n    const [mineOnly, setMineOnly] = useState(false);\r\n    const [onlySLA, setOnlySLA] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [err, setErr] = useState(\"\");\r\n    const [rows, setRows] = useState([]);\r\n    const [active, setActive] = useState(null);\r\n\r\n    // 🔻 Throttle için kuyruk\r\n    const flushTimer = useRef(null);\r\n    const queued = useRef(new Map()); // id -> {id, durum?, kolon_sira?, atanan_sira?}\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"auth_token\");\r\n        if (!token) navigate(\"/login\", { replace: true });\r\n    }, [navigate]);\r\n\r\n    useEffect(() => { fetchData(); /* eslint-disable-next-line */ }, [mineOnly, onlySLA]);\r\n\r\n    // 🔴 Realtime — herkes anında görsün\r\n    useEffect(() => {\r\n        const ch = supabase\r\n            .channel(\"realtime:talepler\")\r\n            .on(\"postgres_changes\",\r\n                { event: \"*\", schema: \"public\", table: \"talepler\" },\r\n                (payload) => {\r\n                    setRows(prev => {\r\n                        const row = payload.new ?? payload.old;\r\n                        if (!row?.id) return prev;\r\n                        if (payload.eventType === \"DELETE\") {\r\n                            return prev.filter(x => x.id !== row.id);\r\n                        }\r\n                        const i = prev.findIndex(x => x.id === row.id);\r\n                        if (i >= 0) {\r\n                            const next = [...prev];\r\n                            next[i] = { ...next[i], ...payload.new };\r\n                            return next;\r\n                        }\r\n                        return [...prev, payload.new];\r\n                    });\r\n                }\r\n            )\r\n            .subscribe();\r\n        return () => { try { supabase.removeChannel(ch); } catch { } };\r\n    }, []);\r\n\r\n    async function fetchData() {\r\n        if (!myEmail) return;\r\n        setLoading(true); setErr(\"\");\r\n        try {\r\n            const now = new Date();\r\n\r\n            let query = supabase.from(\"talepler\").select(`\r\n        id, baslik, durum, oncelik, talep_eden_email, atanan_email,\r\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama,\r\n        kolon_sira, atanan_sira\r\n      `);\r\n\r\n            if (mineOnly) {\r\n                query = query.eq(\"atanan_email\", myEmail)\r\n                    .order(\"atanan_sira\", { ascending: true, nullsFirst: false })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            } else {\r\n                query = query.order(\"kolon_sira\", { ascending: true, nullsFirst: true })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            }\r\n\r\n            if (onlySLA) {\r\n                const t24 = new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString();\r\n                query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", [\"Tamamlandi\", \"Reddedildi\"]);\r\n            }\r\n\r\n            const { data, error } = await query.limit(500);\r\n            if (error) throw error;\r\n            setRows(data || []);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Kayıtlar çekilemedi.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    /* ---------- yardımcılar ---------- */\r\n    function groupByStatus(items) {\r\n        const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\r\n        items.forEach(i => { (map[i.durum || \"Yeni\"] ??= []).push(i); });\r\n        return map;\r\n    }\r\n\r\n    // sırayı sadece ilgili kolon(lar) için yeniden hesapla\r\n    function recomputeColumnOrder(map, keys) {\r\n        keys.forEach(k => {\r\n            (map[k] || []).forEach((it, idx) => { it.kolon_sira = idx + 1; });\r\n        });\r\n    }\r\n\r\n    // throttle ile kuyruğa ekle ve 250ms sonra yaz\r\n    function queuePersist(upds) {\r\n        upds.forEach(u => {\r\n            const prev = queued.current.get(u.id) || {};\r\n            queued.current.set(u.id, { ...prev, ...u }); // merge\r\n        });\r\n        if (!flushTimer.current) {\r\n            flushTimer.current = setTimeout(async () => {\r\n                const payload = Array.from(queued.current.values()).map(u => ({\r\n                    id: u.id,\r\n                    ...(u.durum !== undefined ? { durum: u.durum } : {}),\r\n                    ...(u.kolon_sira !== undefined ? { kolon_sira: u.kolon_sira } : {}),\r\n                    ...(u.atanan_sira !== undefined ? { atanan_sira: u.atanan_sira } : {}),\r\n                    guncelleme_tarihi: new Date().toISOString(),\r\n                }));\r\n                queued.current.clear();\r\n                flushTimer.current = null;\r\n                if (payload.length) {\r\n                    const { error } = await supabase.from(\"talepler\").upsert(payload, { onConflict: \"id\" });\r\n                    if (error) console.error(\"realtime-save error\", error);\r\n                }\r\n            }, 250);\r\n        }\r\n    }\r\n\r\n    async function persistOrder(updates) {\r\n        if (!updates?.length) return;\r\n        const payload = updates.map(u => ({\r\n            id: u.id,\r\n            ...(u.durum !== undefined ? { durum: u.durum } : {}),\r\n            ...(u.kolon_sira !== undefined ? { kolon_sira: u.kolon_sira } : {}),\r\n            ...(u.atanan_sira !== undefined ? { atanan_sira: u.atanan_sira } : {}),\r\n            guncelleme_tarihi: new Date().toISOString(),\r\n        }));\r\n        const { error } = await supabase.from(\"talepler\").upsert(payload, { onConflict: \"id\" });\r\n        if (error) console.error(\"order save error\", error);\r\n    }\r\n\r\n    /* ---------- DnD: KANBAN anlık (update) + final (end) ---------- */\r\n    function onBoardDragUpdate(update) {\r\n        const { source, destination, draggableId } = update;\r\n        if (!destination) return;\r\n\r\n        const from = source.droppableId;\r\n        const to = destination.droppableId;\r\n\r\n        // rows üzerinde simülasyon\r\n        const map = groupByStatus(rows.map(r => ({ ...r })));\r\n        const fromArr = map[from] || [];\r\n        const toArr = map[to] || [];\r\n\r\n        // kaydırılan öğeyi \"mevcut listedeki\" sırasına göre bul\r\n        const movingIdx = fromArr.findIndex(i => String(i.id) === String(draggableId));\r\n        if (movingIdx === -1) return;\r\n        const moving = fromArr.splice(movingIdx, 1)[0];\r\n        moving.durum = to;\r\n\r\n        // hedefe geçici yerleştir\r\n        const destIndex = Math.min(destination.index, toArr.length);\r\n        toArr.splice(destIndex, 0, moving);\r\n\r\n        // sadece etkilenen kolonları sırala\r\n        recomputeColumnOrder(map, from === to ? [to] : [from, to]);\r\n\r\n        // etkilenen kayıtlar için güncellemeleri çıkar\r\n        const updates = [];\r\n        (map[from] || []).forEach((it, idx) => updates.push({ id: it.id, kolon_sira: idx + 1, ...(it.id === moving.id ? { durum: it.durum } : {}) }));\r\n        if (from !== to) {\r\n            (map[to] || []).forEach((it, idx) => updates.push({ id: it.id, kolon_sira: idx + 1, ...(it.id === moving.id ? { durum: it.durum } : {}) }));\r\n        }\r\n\r\n        // throttle ile yaz (drop beklemeden)\r\n        queuePersist(updates);\r\n    }\r\n\r\n    async function onBoardDragEnd(result) {\r\n        const { source, destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        const statusFrom = source.droppableId;\r\n        const statusTo = destination.droppableId;\r\n\r\n        const byStatus = groupByStatus([...rows]);\r\n        const idx = byStatus[statusFrom].findIndex(i => String(i.id) === String(draggableId));\r\n        if (idx === -1) return;\r\n\r\n        const item = byStatus[statusFrom][idx];\r\n        byStatus[statusFrom].splice(idx, 1);\r\n        byStatus[statusTo].splice(destination.index, 0, item);\r\n        item.durum = statusTo;\r\n\r\n        // kolon sıraları\r\n        BOARD_COLUMNS.forEach(col => {\r\n            byStatus[col.key].forEach((it, i) => { it.kolon_sira = i + 1; });\r\n        });\r\n\r\n        const flattened = BOARD_COLUMNS.flatMap(c => byStatus[c.key]);\r\n        setRows(flattened); // optimistic\r\n\r\n        // final kaydet\r\n        await persistOrder(\r\n            [statusFrom, statusTo].flatMap(k =>\r\n                (byStatus[k] || []).map((it, i) => ({ id: it.id, durum: it.durum, kolon_sira: i + 1 }))\r\n            )\r\n        );\r\n    }\r\n\r\n    /* ---------- DnD: LİSTE (Bana atananlar) anlık + final ---------- */\r\n    function onListDragUpdate(update) {\r\n        const { destination, draggableId } = update;\r\n        if (!destination || !mineOnly) return;\r\n\r\n        // görünür listedeki (sadece bana atanmış) sıralama\r\n        const list = rows\r\n            .filter(r => r.atanan_email === myEmail)\r\n            .map(r => ({ ...r }))\r\n            .sort((a, b) => (a.atanan_sira ?? 999999) - (b.atanan_sira ?? 999999));\r\n\r\n        const from = list.findIndex(i => String(i.id) === String(draggableId));\r\n        if (from === -1) return;\r\n\r\n        const moved = list.splice(from, 1)[0];\r\n        const destIndex = Math.min(destination.index, list.length);\r\n        list.splice(destIndex, 0, moved);\r\n\r\n        // yeni 1..N\r\n        list.forEach((r, i) => { r.atanan_sira = i + 1; });\r\n\r\n        // sadece kuyruktaki kayıtları gönder\r\n        queuePersist(list.map(r => ({ id: r.id, atanan_sira: r.atanan_sira })));\r\n    }\r\n\r\n    async function onListDragEnd(result) {\r\n        const { destination, draggableId } = result;\r\n        if (!destination || !mineOnly) return;\r\n\r\n        // final liste\r\n        const list = rows\r\n            .filter(r => r.atanan_email === myEmail)\r\n            .map(r => ({ ...r }))\r\n            .sort((a, b) => (a.atanan_sira ?? 999999) - (b.atanan_sira ?? 999999));\r\n\r\n        const from = list.findIndex(i => String(i.id) === String(draggableId));\r\n        if (from === -1) return;\r\n\r\n        const moved = list.splice(from, 1)[0];\r\n        list.splice(destination.index, 0, moved);\r\n\r\n        list.forEach((r, i) => { r.atanan_sira = i + 1; });\r\n\r\n        // optimistic\r\n        const next = rows.map(r => {\r\n            const hit = list.find(x => x.id === r.id);\r\n            return hit ? { ...r, atanan_sira: hit.atanan_sira } : r;\r\n        });\r\n        setRows(next);\r\n\r\n        await persistOrder(list.map(({ id, atanan_sira }) => ({ id, atanan_sira })));\r\n    }\r\n\r\n    /* ---------- tek aksiyon: Üstlen ---------- */\r\n    async function takeOwnership(id) {\r\n        if (!myEmail) return;\r\n        const myColMax = rows.filter(r => r.durum === \"Inceleme\")\r\n            .reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\r\n        const myQueueMax = rows.filter(r => r.atanan_email === myEmail)\r\n            .reduce((m, r) => Math.max(m, r.atanan_sira || 0), 0) + 1;\r\n\r\n        const { error } = await supabase.from(\"talepler\").update({\r\n            atanan_email: myEmail,\r\n            durum: \"Inceleme\",\r\n            kolon_sira: myColMax,\r\n            atanan_sira: myQueueMax,\r\n            guncelleme_tarihi: new Date().toISOString()\r\n        }).eq(\"id\", id);\r\n        if (!error) fetchData();\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(\"auth_token\");\r\n        localStorage.removeItem(\"user_profile\");\r\n        navigate(\"/login\", { replace: true });\r\n    }\r\n\r\n    /* ---------- filter ---------- */\r\n    const filtered = rows.filter(r => {\r\n        if (!q) return true;\r\n        const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"}`.toLowerCase();\r\n        return text.includes(q.toLowerCase());\r\n    });\r\n\r\n    const grouped = groupByStatus(filtered);\r\n\r\n    return (\r\n        <div className=\"mx\">\r\n            {/* Command bar */}\r\n            <div className=\"mx-top\">\r\n                <div className=\"brand\">\r\n                    <div className=\"logo\">🧭</div>\r\n                    <div className=\"bt\">\r\n                        <h1>Gelen Kutusu</h1>\r\n                        <span className=\"muted\">İş & Süreç Geliştirme</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"cmd\">\r\n                    <div className=\"seg\">\r\n                        <button className={`seg-btn ${view === \"board\" ? \"on\" : \"\"}`} onClick={() => setView(\"board\")}>Kanban</button>\r\n                        <button className={`seg-btn ${view === \"list\" ? \"on\" : \"\"}`} onClick={() => setView(\"list\")}>Liste</button>\r\n                    </div>\r\n\r\n                    <div className=\"search-wrap\">\r\n                        <input className=\"search\" placeholder=\"Ara: #id, başlık, kişi…\" value={q} onChange={(e) => setQ(e.target.value)} />\r\n                    </div>\r\n\r\n                    <div className=\"toggles\">\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={mineOnly} onChange={e => setMineOnly(e.target.checked)} />\r\n                            <span>Bana atananlar</span>\r\n                        </label>\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={onlySLA} onChange={e => setOnlySLA(e.target.checked)} />\r\n                            <span>SLA (&lt;24s)</span>\r\n                        </label>\r\n                    </div>\r\n\r\n                    <Link to=\"/newrequest\" className=\"btn primary\">+ Yeni Talep</Link>\r\n                    <div className=\"chip\">{me?.kullanici || me?.email}</div>\r\n                    <button className=\"btn danger\" onClick={handleLogout}>Çıkış</button>\r\n                </div>\r\n            </div>\r\n\r\n            {err && <div className=\"mx-alert err\">{err}</div>}\r\n\r\n            {loading ? (\r\n                <div className=\"mx-skel\">Yükleniyor…</div>\r\n            ) : view === \"board\" ? (\r\n                <DragDropContext onDragUpdate={onBoardDragUpdate} onDragEnd={onBoardDragEnd}>\r\n                    <div className=\"board\">\r\n                        {BOARD_COLUMNS.map(col => {\r\n                            const items = grouped[col.key] || [];\r\n                            // Drag sırasında görsel sıralamayı kütüphane hallediyor; biz sadece render ediyoruz\r\n                            return (\r\n                                <Droppable droppableId={col.key} key={col.key}>\r\n                                    {(provided) => (\r\n                                        <div className=\"col\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                            <div className=\"col-head\">\r\n                                                <span className={`dot s-${slug(col.title)}`}></span>\r\n                                                <h3>{col.title}</h3>\r\n                                                <span className=\"count\">{items.length}</span>\r\n                                            </div>\r\n                                            <div className=\"col-body\">\r\n                                                {items.length === 0 && <div className=\"col-empty\">Henüz kayıt yok</div>}\r\n                                                {items.map((item, index) => (\r\n                                                    <Draggable draggableId={String(item.id)} index={index} key={item.id}>\r\n                                                        {(pp) => (\r\n                                                            <div ref={pp.innerRef} {...pp.draggableProps} {...pp.dragHandleProps}>\r\n                                                                <Card\r\n                                                                    data={item}\r\n                                                                    rank={(item.kolon_sira ?? index) + 1}\r\n                                                                    onOpen={() => setActive(item)}\r\n                                                                    onTake={() => takeOwnership(item.id)}\r\n                                                                    me={myEmail}\r\n                                                                />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </Draggable>\r\n                                                ))}\r\n                                                {provided.placeholder}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </DragDropContext>\r\n            ) : (\r\n                // LISTE GÖRÜNÜMÜ — mineOnly açıkken sürükleyerek atanan_sira değiştir\r\n                <DragDropContext onDragUpdate={onListDragUpdate} onDragEnd={onListDragEnd}>\r\n                    <Droppable droppableId=\"listMine\" isDropDisabled={!mineOnly}>\r\n                        {(provided) => (\r\n                            <div className=\"listv\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                {filtered.length === 0 && <div className=\"col-empty\">Kayıt bulunamadı</div>}\r\n                                {filtered.map((r, index) => (\r\n                                    <Draggable draggableId={String(r.id)} index={index} key={r.id} isDragDisabled={!mineOnly}>\r\n                                        {(pp) => (\r\n                                            <div\r\n                                                ref={pp.innerRef} {...pp.draggableProps} {...pp.dragHandleProps}\r\n                                                className=\"rowv\" onClick={() => setActive(r)}\r\n                                            >\r\n                                                <span className={`pill ${PILL_COLOR[r.oncelik] || \"p3\"}`}>{r.oncelik || \"P3\"}</span>\r\n                                                <span className={`badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[r.durum] || \"Yeni\"}</span>\r\n                                                <span className=\"r-title\">#{r.id} — {r.baslik}</span>\r\n                                                <span className=\"r-sub\">\r\n                                                    {r.talep_eden_email} → {r.atanan_email || \"—\"}\r\n                                                    {mineOnly && r.atanan_email === myEmail && (\r\n                                                        <b style={{ marginLeft: 8, opacity: .8 }}>(Sıra: {r.atanan_sira ?? \"—\"})</b>\r\n                                                    )}\r\n                                                </span>\r\n                                                <span className=\"r-time\">{fmtTime(r.guncelleme_tarihi)}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </Draggable>\r\n                                ))}\r\n                                {provided.placeholder}\r\n                                {!mineOnly && (\r\n                                    <div className=\"hint\" style={{ padding: 8, opacity: .7 }}>\r\n                                        Listeyi sürükleyerek sıralamak için “Bana atananlar”ı işaretleyin.\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </Droppable>\r\n                </DragDropContext>\r\n            )}\r\n\r\n            {/* Detay çekmecesi */}\r\n            {active && (\r\n                <div className=\"drawer\" role=\"dialog\" aria-modal=\"true\">\r\n                    <div className=\"drawer-panel\">\r\n                        <button className=\"drawer-close\" onClick={() => setActive(null)}>×</button>\r\n\r\n                        <div className=\"drawer-top\">\r\n                            <span className={`pill ${PILL_COLOR[active.oncelik] || \"p3\"}`}>{active.oncelik || \"P3\"}</span>\r\n                            <span className={`badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[active.durum] || \"Yeni\"}</span>\r\n                            <h2>#{active.id} — {active.baslik}</h2>\r\n                            <div className=\"d-sub\">\r\n                                <span>İsteyen: <b>{active.talep_eden_email}</b></span>\r\n                                <span> · </span>\r\n                                <span>Atanan: <b>{active.atanan_email || \"—\"}</b></span>\r\n                                <span> · </span>\r\n                                <span>Güncellendi: {fmtTime(active.guncelleme_tarihi)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"drawer-body\">\r\n                            <Section title=\"Açıklama\">\r\n                                <p className=\"desc\">{active.aciklama || \"Açıklama girilmemiş.\"}</p>\r\n                            </Section>\r\n\r\n                            {/* Sadece Üstlen (atanmamışsa) */}\r\n                            {!active.atanan_email && (\r\n                                <Section title=\"Atama\">\r\n                                    <button className=\"btn primary\" onClick={() => { setActive(null); takeOwnership(active.id); }}>\r\n                                        Üstlen\r\n                                    </button>\r\n                                </Section>\r\n                            )}\r\n\r\n                            <Section title=\"Zaman\">\r\n                                <div className=\"kv\">\r\n                                    <div><span>Hedef Tarih:</span><b>{active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"}</b></div>\r\n                                    <div><span>SLA Son:</span><b>{active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"}</b></div>\r\n                                </div>\r\n                            </Section>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"drawer-backdrop\" onClick={() => setActive(null)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/* components */\r\nfunction Card({ data, rank, onOpen, onTake, me }) {\r\n    const mine = data.atanan_email && data.atanan_email === me;\r\n    const slaSoon = data.sla_son_tarih && new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\r\n\r\n    return (\r\n        <div className={`card ${mine ? \"mine\" : \"\"}`}>\r\n            <div className=\"c-top\">\r\n                <span className={`pill ${PILL_COLOR[data.oncelik] || \"p3\"}`}>{data.oncelik || \"P3\"}</span>\r\n                <span className={`badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[data.durum] || \"Yeni\"}</span>\r\n                {slaSoon && <span className=\"sla\">SLA</span>}\r\n                <span title=\"Bu kolondaki sıra\" style={{ marginLeft: \"auto\", fontSize: 12, opacity: .75 }}>#{rank}</span>\r\n                <button className=\"icn\" onClick={onOpen} title=\"Detay\">⋯</button>\r\n            </div>\r\n\r\n            <div className=\"c-title\">#{data.id} — {data.baslik}</div>\r\n            <div className=\"c-sub\">\r\n                <span>{data.talep_eden_email}</span>\r\n                <span>→</span>\r\n                <span>{data.atanan_email || \"—\"}</span>\r\n            </div>\r\n\r\n            <div className=\"c-foot\">\r\n                <span className=\"time\">{fmtTime(data.guncelleme_tarihi)}</span>\r\n                <div className=\"act\">\r\n                    {!data.atanan_email && <button className=\"btn ghost xs\" onClick={onTake}>Üstlen</button>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Section({ title, children }) {\r\n    return (\r\n        <section className=\"sec\">\r\n            <div className=\"sec-h\"><h4>{title}</h4></div>\r\n            <div className=\"sec-b\">{children}</div>\r\n        </section>\r\n    );\r\n}\r\n\r\n/* utils */\r\nfunction slug(s) { return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\"); }\r\nfunction fmtTime(ts) { try { return new Date(ts).toLocaleString(); } catch { return \"—\"; } }\r\nfunction fmtDate(ts) { try { return new Date(ts).toLocaleDateString(); } catch { return \"—\"; } }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}