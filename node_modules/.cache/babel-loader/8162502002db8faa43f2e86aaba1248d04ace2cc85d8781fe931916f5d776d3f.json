{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gorkem.Cadirci\\\\talep-sistemi\\\\src\\\\pages\\\\Inbox.js\",\n  _s = $RefreshSig$();\n// src/pages/Inbox.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\nimport supabase from \"../supabaseClient\";\nimport \"./Inbox.css\";\n\n/**\r\n * Realtime için:\r\n *   alter publication supabase_realtime add table public.talepler;\r\n *\r\n * Not: Bu sürüm \"tek satır güncelle\" stratejisi kullanır.\r\n * - Kanban sürükle-bırak: sadece taşınan kaydı update eder (kolon_sira = komşuların ortası)\r\n * - Liste sürükle-bırak: yalnızca taşınan kaydın atanan_sira/global_sira değerini günceller\r\n */\n\n/* ---- DURUMLAR (DB Kodları) ---- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS = {\n  Yeni: \"Yeni\",\n  SirayaAlindi: \"SirayaAlindi\",\n  IslemeAlindi: \"IslemeAlindi\",\n  TestEdiliyor: \"TestEdiliyor\",\n  Tamamlandi: \"Tamamlandi\"\n};\nconst STATUS_DISPLAY = {\n  [STATUS.Yeni]: \"Yeni\",\n  [STATUS.SirayaAlindi]: \"Sıraya Alındı\",\n  [STATUS.IslemeAlindi]: \"İşleme Alındı\",\n  [STATUS.TestEdiliyor]: \"Test Ediliyor\",\n  [STATUS.Tamamlandi]: \"Tamamlandı\"\n};\nconst BOARD_COLUMNS = [{\n  key: STATUS.Yeni,\n  title: STATUS_DISPLAY[STATUS.Yeni]\n}, {\n  key: STATUS.SirayaAlindi,\n  title: STATUS_DISPLAY[STATUS.SirayaAlindi]\n}, {\n  key: STATUS.IslemeAlindi,\n  title: STATUS_DISPLAY[STATUS.IslemeAlindi]\n}, {\n  key: STATUS.TestEdiliyor,\n  title: STATUS_DISPLAY[STATUS.TestEdiliyor]\n}, {\n  key: STATUS.Tamamlandi,\n  title: STATUS_DISPLAY[STATUS.Tamamlandi]\n}];\nconst PILL_COLOR = {\n  P1: \"p1\",\n  P2: \"p2\",\n  P3: \"p3\"\n};\n\n/* ---- YETKİ ---- */\nfunction trUp(s) {\n  return (s || \"\").trim().toLocaleUpperCase(\"tr-TR\");\n}\nconst ALLOWED_NAMES = new Set([\"GÖRKEM ÇADIRCI\", \"FURKAN BİLGİLİ\", \"YAĞIZ EFE BULUTCU\"]);\nfunction computeIsEditor(profile) {\n  if (profile && typeof profile.isEditor === \"boolean\") return profile.isEditor;\n  return trUp(profile === null || profile === void 0 ? void 0 : profile.birim) === \"İŞ VE SÜREÇ GELİŞTİRME\" && ALLOWED_NAMES.has(trUp((profile === null || profile === void 0 ? void 0 : profile.kullanici) || (profile === null || profile === void 0 ? void 0 : profile.email)));\n}\n\n/* ---- SIRALAMA YARDIMCI ----\r\n   Sadece taşınan karta yeni sıra değeri vermek için \"araya yerleştir\" yaklaşımı.\r\n*/\nconst GAP = 1000;\nfunction between(prev, next) {\n  const hasPrev = Number.isFinite(prev);\n  const hasNext = Number.isFinite(next);\n  if (hasPrev && hasNext) return (prev + next) / 2;\n  if (hasPrev && !hasNext) return prev + GAP;\n  if (!hasPrev && hasNext) return next - GAP;\n  return GAP; // boş kolona ilk eleman\n}\n\n/* ---- BİLEŞEN ---- */\nexport default function InboxModern() {\n  _s();\n  const navigate = useNavigate();\n  const me = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\");\n    } catch {\n      return {};\n    }\n  }, []);\n  const myEmail = (me === null || me === void 0 ? void 0 : me.email) || \"\";\n  const myName = ((me === null || me === void 0 ? void 0 : me.kullanici) || \"\").trim();\n  const canEdit = useMemo(() => computeIsEditor(me), [me]);\n  const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\n  const [q, setQ] = useState(\"\");\n  const [mineOnly, setMineOnly] = useState(false);\n  const [onlySLA, setOnlySLA] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const [rows, setRows] = useState([]);\n  const [active, setActive] = useState(null);\n  const mineOnlyRef = useRef(mineOnly);\n  useEffect(() => {\n    mineOnlyRef.current = mineOnly;\n  }, [mineOnly]);\n\n  // auth guard\n  useEffect(() => {\n    const token = localStorage.getItem(\"auth_token\");\n    if (!token) navigate(\"/login\", {\n      replace: true\n    });\n  }, [navigate]);\n\n  // data\n  useEffect(() => {\n    fetchData(); /* eslint-disable-next-line */\n  }, [mineOnly, onlySLA, view]);\n\n  // realtime\n  useEffect(() => {\n    const channel = supabase.channel(\"talepler-realtime\").on(\"postgres_changes\", {\n      event: \"*\",\n      schema: \"public\",\n      table: \"talepler\"\n    }, payload => setRows(prev => applyRealtime(prev, payload, mineOnlyRef.current, view))).subscribe();\n    return () => supabase.removeChannel(channel);\n  }, [view]);\n\n  // görünüm değişince sırala\n  useEffect(() => {\n    setRows(prev => sortRows(prev, mineOnly, view));\n  }, [mineOnly, view]);\n  async function fetchData() {\n    if (!myEmail) return;\n    setLoading(true);\n    setErr(\"\");\n    try {\n      let query = supabase.from(\"talepler\").select(`\n        id, baslik, durum, oncelik,\n        talep_eden_email, atanan_email,\n        talep_eden_kullanici, atanan_kullanici,\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama,\n        kolon_sira, atanan_sira, global_sira\n      `);\n      if (view === \"list\" && !mineOnly) {\n        query = query.order(\"global_sira\", {\n          ascending: true,\n          nullsFirst: true\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      } else if (mineOnly) {\n        query = query.eq(\"atanan_email\", myEmail).order(\"atanan_sira\", {\n          ascending: true,\n          nullsFirst: false\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      } else {\n        query = query.order(\"kolon_sira\", {\n          ascending: true,\n          nullsFirst: true\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      }\n      if (onlySLA) {\n        const t24 = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();\n        query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", '(\"Tamamlandi\",\"Reddedildi\")');\n      }\n      const {\n        data,\n        error\n      } = await query.limit(500);\n      if (error) throw error;\n      setRows(sortRows(data || [], mineOnly, view));\n    } catch (e) {\n      console.error(e);\n      setErr(\"Kayıtlar çekilemedi.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  /* ---------- helpers ---------- */\n  function groupByStatus(items) {\n    const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\n    items.forEach(i => {\n      (map[i.durum || STATUS.Yeni] ??= []).push(i);\n    });\n    // her kolonu kendi içinde kolon_sira'ya göre sırala (null sona)\n    for (const k of Object.keys(map)) {\n      map[k].sort((a, b) => {\n        var _a$kolon_sira, _b$kolon_sira;\n        return ((_a$kolon_sira = a.kolon_sira) !== null && _a$kolon_sira !== void 0 ? _a$kolon_sira : 1e15) - ((_b$kolon_sira = b.kolon_sira) !== null && _b$kolon_sira !== void 0 ? _b$kolon_sira : 1e15);\n      });\n    }\n    return map;\n  }\n\n  // sadece tek kayıt update eden yardımcı\n  async function updateRow(id, changes) {\n    setSaving(true);\n    const {\n      error\n    } = await supabase.from(\"talepler\").update({\n      ...changes,\n      guncelleme_tarihi: new Date().toISOString()\n    }).eq(\"id\", id);\n    setSaving(false);\n    if (error) {\n      console.error(\"updateRow error\", error);\n      setErr(error.message || \"Güncelleme başarısız.\");\n      // optimistic'i geri almak yerine taze veri çek\n      fetchData();\n      return false;\n    }\n    return true;\n  }\n\n  /* ---------- DnD: Kanban (tek kayıt güncelle) ---------- */\n  async function onBoardDragEnd(result) {\n    var _dstArr, _dstArr2;\n    if (!canEdit) return;\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    const statusFrom = source.droppableId;\n    const statusTo = destination.droppableId;\n    const byStatus = groupByStatus([...rows]);\n    const srcArr = byStatus[statusFrom];\n    const dstArr = byStatus[statusTo];\n    const idx = srcArr.findIndex(i => String(i.id) === String(draggableId));\n    if (idx === -1) return;\n    const item = srcArr[idx];\n    if (item.atanan_email !== myEmail) {\n      setErr(\"Bu kart size atanmadığı için taşıyamazsınız.\");\n      return;\n    }\n\n    // UI'de önce göster\n    srcArr.splice(idx, 1);\n    const destIndex = destination.index;\n    dstArr.splice(destIndex, 0, item);\n\n    // yeni kolon_sira'yı yalnızca taşınan karta hesapla\n    const prev = (_dstArr = dstArr[destIndex - 1]) === null || _dstArr === void 0 ? void 0 : _dstArr.kolon_sira;\n    const next = (_dstArr2 = dstArr[destIndex + 1]) === null || _dstArr2 === void 0 ? void 0 : _dstArr2.kolon_sira;\n    const newKolonSira = between(prev, next);\n    const newDurum = statusTo;\n\n    // optimistic\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === item.id ? {\n      ...r,\n      durum: newDurum,\n      kolon_sira: newKolonSira\n    } : r), mineOnly, view));\n\n    // persist: TEK PATCH\n    await updateRow(item.id, {\n      durum: newDurum,\n      kolon_sira: newKolonSira\n    });\n  }\n\n  /* ---------- DnD: Liste (tek kayıt güncelle) ---------- */\n  async function onListDragEnd(result) {\n    var _listMine, _listMine2;\n    const {\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    if (!mineOnly) {\n      var _list, _list2;\n      // GLOBAL sıra: sadece editörler\n      if (!canEdit) return;\n\n      // UI listesinde mevcut sıraya göre çalış\n      const list = [...filtered];\n      const from = list.findIndex(i => String(i.id) === String(draggableId));\n      if (from === -1) return;\n      const moved = list[from];\n      list.splice(from, 1);\n      const to = destination.index;\n      list.splice(to, 0, moved);\n      const prev = (_list = list[to - 1]) === null || _list === void 0 ? void 0 : _list.global_sira;\n      const next = (_list2 = list[to + 1]) === null || _list2 === void 0 ? void 0 : _list2.global_sira;\n      const newGlobal = between(prev, next);\n\n      // optimistic\n      setRows(prevRows => sortRows(prevRows.map(r => r.id === moved.id ? {\n        ...r,\n        global_sira: newGlobal\n      } : r), mineOnly, view));\n      await updateRow(moved.id, {\n        global_sira: newGlobal\n      });\n      return;\n    }\n\n    // mineOnly: sadece bana atanmış kuyruk sırası\n    if (!canEdit) return;\n    const listMine = filtered.filter(r => r.atanan_email === myEmail);\n    const from = listMine.findIndex(i => String(i.id) === String(draggableId));\n    if (from === -1) return;\n    const moved = listMine[from];\n    listMine.splice(from, 1);\n    const to = destination.index;\n    listMine.splice(to, 0, moved);\n    const prev = (_listMine = listMine[to - 1]) === null || _listMine === void 0 ? void 0 : _listMine.atanan_sira;\n    const next = (_listMine2 = listMine[to + 1]) === null || _listMine2 === void 0 ? void 0 : _listMine2.atanan_sira;\n    const newRank = between(prev, next);\n\n    // optimistic\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === moved.id ? {\n      ...r,\n      atanan_sira: newRank\n    } : r), mineOnly, view));\n    await updateRow(moved.id, {\n      atanan_sira: newRank\n    });\n  }\n\n  /* ---------- quick actions ---------- */\n  async function takeOwnership(id) {\n    var _dst, _mineList;\n    if (!canEdit || !myEmail) return;\n    const row = rows.find(r => r.id === id);\n    if (row && row.atanan_email && row.atanan_email !== myEmail) {\n      setErr(\"Bu kayıt size atanmadığı için işlem yapamazsınız.\");\n      return;\n    }\n\n    // hedef sütunda en alta (tek güncelleme)\n    const byStatus = groupByStatus(rows);\n    const dst = byStatus[STATUS.SirayaAlindi];\n    const last = (_dst = dst[dst.length - 1]) === null || _dst === void 0 ? void 0 : _dst.kolon_sira;\n    const newKolonSira = between(last, undefined);\n\n    // kişisel kuyruğun en sonuna\n    const mineList = rows.filter(r => r.atanan_email === myEmail).sort((a, b) => {\n      var _a$atanan_sira, _b$atanan_sira;\n      return ((_a$atanan_sira = a.atanan_sira) !== null && _a$atanan_sira !== void 0 ? _a$atanan_sira : 0) - ((_b$atanan_sira = b.atanan_sira) !== null && _b$atanan_sira !== void 0 ? _b$atanan_sira : 0);\n    });\n    const lastMine = (_mineList = mineList[mineList.length - 1]) === null || _mineList === void 0 ? void 0 : _mineList.atanan_sira;\n    const newMyRank = between(lastMine, undefined);\n\n    // optimistic\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === id ? {\n      ...r,\n      atanan_email: myEmail,\n      atanan_kullanici: myName || null,\n      durum: STATUS.SirayaAlindi,\n      kolon_sira: newKolonSira,\n      atanan_sira: newMyRank\n    } : r), mineOnly, view));\n    await updateRow(id, {\n      atanan_email: myEmail,\n      atanan_kullanici: myName || null,\n      durum: STATUS.SirayaAlindi,\n      kolon_sira: newKolonSira,\n      atanan_sira: newMyRank\n    });\n  }\n  async function moveTo(id, statusKey) {\n    var _dst2;\n    if (!canEdit) return;\n    const row = rows.find(r => r.id === id);\n    if (!row || row.atanan_email !== myEmail) {\n      setErr(\"Bu kayıt size atanmadığı için işlem yapamazsınız.\");\n      return;\n    }\n\n    // hedef kolondaki yerine en alta koy\n    const byStatus = groupByStatus(rows);\n    const dst = byStatus[statusKey];\n    const last = (_dst2 = dst[dst.length - 1]) === null || _dst2 === void 0 ? void 0 : _dst2.kolon_sira;\n    const newKolonSira = between(last, undefined);\n\n    // optimistic\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === id ? {\n      ...r,\n      durum: statusKey,\n      kolon_sira: newKolonSira\n    } : r), mineOnly, view));\n    await updateRow(id, {\n      durum: statusKey,\n      kolon_sira: newKolonSira\n    });\n  }\n  async function markDone(id) {\n    await moveTo(id, STATUS.Tamamlandi);\n  }\n  function handleLogout() {\n    localStorage.removeItem(\"auth_token\");\n    localStorage.removeItem(\"user_profile\");\n    navigate(\"/login\", {\n      replace: true\n    });\n  }\n\n  /* ---------- filter ---------- */\n  const filtered = rows.filter(r => {\n    if (!q) return true;\n    const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"} ${r.talep_eden_kullanici || \"\"} ${r.atanan_kullanici || \"\"}`.toLowerCase();\n    return text.includes(q.toLowerCase());\n  });\n  const grouped = groupByStatus(filtered);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: \"\\uD83E\\uDDED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bt\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Gelen Kutusu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"muted\",\n            children: \"\\u0130\\u015F & S\\xFCre\\xE7 Geli\\u015Ftirme\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cmd\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seg\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"board\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"board\"),\n            children: \"Kanban\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"list\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"list\"),\n            children: \"Liste\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"search\",\n            placeholder: \"Ara: #id, ba\\u015Fl\\u0131k, ki\\u015Fi\\u2026\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toggles\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: mineOnly,\n              onChange: e => setMineOnly(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Bana atananlar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: onlySLA,\n              onChange: e => setOnlySLA(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"SLA (<24s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/newrequest\",\n          className: \"btn primary\",\n          children: \"+ Yeni Talep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chip\",\n          children: ((me === null || me === void 0 ? void 0 : me.kullanici) || (me === null || me === void 0 ? void 0 : me.email)) + (canEdit ? \" • editör\" : \"\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn danger\",\n          onClick: handleLogout,\n          children: \"\\xC7\\u0131k\\u0131\\u015F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 21\n        }, this), saving && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"saving-ind\",\n          children: \"Kaydediliyor\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 13\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-alert err\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 21\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-skel\",\n      children: \"Y\\xFCkleniyor\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 17\n    }, this) : view === \"board\" ? /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onBoardDragEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: BOARD_COLUMNS.map(col => {\n          const items = grouped[col.key] || [];\n          return /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: col.key,\n            isDropDisabled: !canEdit,\n            children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              ref: provided.innerRef,\n              ...provided.droppableProps,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-head\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `dot s-${slug(col.title)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: col.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"count\",\n                  children: items.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-body\",\n                children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-empty\",\n                  children: \"Hen\\xFCz kay\\u0131t yok\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 72\n                }, this), items.map((item, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                  draggableId: String(item.id),\n                  index: index,\n                  isDragDisabled: !canEdit || !(item.atanan_email && item.atanan_email === myEmail),\n                  children: pp => /*#__PURE__*/_jsxDEV(\"div\", {\n                    ref: pp.innerRef,\n                    ...pp.draggableProps,\n                    ...pp.dragHandleProps,\n                    children: /*#__PURE__*/_jsxDEV(Card, {\n                      data: item,\n                      onOpen: () => setActive(item),\n                      onTake: () => canEdit && takeOwnership(item.id),\n                      onMove: st => canEdit && moveTo(item.id, st),\n                      onDone: () => canEdit && markDone(item.id),\n                      me: myEmail\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 468,\n                      columnNumber: 65\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 61\n                  }, this)\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 53\n                }, this)), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 41\n            }, this)\n          }, col.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onListDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: \"listMine\",\n        isDropDisabled: !canEdit && !mineOnly,\n        children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listv\",\n          ref: provided.innerRef,\n          ...provided.droppableProps,\n          children: [filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-empty\",\n            children: \"Kay\\u0131t bulunamad\\u0131\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 59\n          }, this), filtered.map((r, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: String(r.id),\n            index: index,\n            isDragDisabled: !canEdit && !mineOnly,\n            children: pp => {\n              var _r$atanan_sira;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: pp.innerRef,\n                ...pp.draggableProps,\n                ...pp.dragHandleProps,\n                className: \"rowv\",\n                onClick: () => setActive(r),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `pill ${PILL_COLOR[r.oncelik] || \"p3\"}`,\n                  children: r.oncelik || \"P3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`,\n                  children: STATUS_DISPLAY[r.durum] || \"Yeni\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-title\",\n                  children: [\"#\", r.id, \" \\u2014 \", r.baslik]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-sub\",\n                  children: [r.talep_eden_kullanici || r.talep_eden_email || \"—\", \" \\u2192 \", r.atanan_kullanici || r.atanan_email || \"—\", mineOnly && r.atanan_email === myEmail && /*#__PURE__*/_jsxDEV(\"b\", {\n                    style: {\n                      marginLeft: 8,\n                      opacity: 0.8\n                    },\n                    children: [\"(S\\u0131ra: \", (_r$atanan_sira = r.atanan_sira) !== null && _r$atanan_sira !== void 0 ? _r$atanan_sira : \"—\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-time\",\n                  children: fmtTime(r.guncelleme_tarihi)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 45\n              }, this);\n            }\n          }, r.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 37\n          }, this)), provided.placeholder, !mineOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hint\",\n            style: {\n              padding: 8,\n              opacity: 0.7\n            },\n            children: canEdit ? \"Bu listede sürüklediğin sıra herkese yansır.\" : \"Sıralamayı yalnızca yetkili kullanıcılar değiştirebilir.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 17\n    }, this), active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drawer\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"drawer-close\",\n          onClick: () => setActive(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `pill ${PILL_COLOR[active.oncelik] || \"p3\"}`,\n            children: active.oncelik || \"P3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`,\n            children: STATUS_DISPLAY[active.durum] || \"Yeni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 29\n          }, this), active.sla_son_tarih && new Date(active.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sla\",\n            children: \"SLA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"#\", active.id, \" \\u2014 \", active.baslik]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-sub\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u0130steyen: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.talep_eden_kullanici || active.talep_eden_email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Atanan: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.atanan_kullanici || active.atanan_email || \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"G\\xFCncellendi: \", fmtTime(active.guncelleme_tarihi)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-body\",\n          children: [/*#__PURE__*/_jsxDEV(Section, {\n            title: \"A\\xE7\\u0131klama\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"desc\",\n              children: active.aciklama || \"Açıklama girilmemiş.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"H\\u0131zl\\u0131 \\u0130\\u015Flemler\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"act-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (canEdit) {\n                    setActive(null);\n                    takeOwnership(active.id);\n                  }\n                },\n                disabled: !canEdit || !!active.atanan_email && active.atanan_email !== myEmail,\n                title: !canEdit ? \"Yalnızca yetkili kullanıcılar işlem yapabilir\" : active.atanan_email && active.atanan_email !== myEmail ? \"Sadece atanan işlem yapabilir\" : undefined,\n                children: \"\\xDCstlen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (canEdit && active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.SirayaAlindi);\n                  }\n                },\n                disabled: !canEdit || active.atanan_email !== myEmail,\n                title: !canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined,\n                children: \"S\\u0131raya al\\u0131nd\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (canEdit && active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.IslemeAlindi);\n                  }\n                },\n                disabled: !canEdit || active.atanan_email !== myEmail,\n                title: !canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined,\n                children: \"\\u0130\\u015Fleme al\\u0131nd\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (canEdit && active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.TestEdiliyor);\n                  }\n                },\n                disabled: !canEdit || active.atanan_email !== myEmail,\n                title: !canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined,\n                children: \"Test ediliyor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                onClick: () => {\n                  if (canEdit && active.atanan_email === myEmail) {\n                    setActive(null);\n                    markDone(active.id);\n                  }\n                },\n                disabled: !canEdit || active.atanan_email !== myEmail,\n                title: !canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined,\n                children: \"\\u2713 Tamamland\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Zaman\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"kv\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hedef Tarih:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 67\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"SLA Son:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-backdrop\",\n        onClick: () => setActive(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 9\n  }, this);\n}\n\n/* components */\n_s(InboxModern, \"dq1PpqS36hrDngWhaTIa8wENZrs=\", false, function () {\n  return [useNavigate];\n});\n_c = InboxModern;\nfunction Card({\n  data,\n  onOpen,\n  onTake,\n  onMove,\n  onDone,\n  me\n}) {\n  const mine = data.atanan_email && data.atanan_email === me;\n  const slaSoon = data.sla_son_tarih && new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\n  const fromLabel = data.talep_eden_kullanici || data.talep_eden_email || \"—\";\n  const toLabel = data.atanan_kullanici || data.atanan_email || \"—\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `card ${mine ? \"mine\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `pill ${PILL_COLOR[data.oncelik] || \"p3\"}`,\n        children: data.oncelik || \"P3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`,\n        children: STATUS_DISPLAY[data.durum] || \"Yeni\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 17\n      }, this), slaSoon && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sla\",\n        children: \"SLA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icn\",\n        onClick: onOpen,\n        title: \"Detay\",\n        children: \"\\u22EF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-title\",\n      children: [\"#\", data.id, \" \\u2014 \", data.baslik]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-sub\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: fromLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: toLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-foot\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"time\",\n        children: fmtTime(data.guncelleme_tarihi)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"act\",\n        children: [!data.atanan_email && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: onTake,\n          children: \"\\xDCstlen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: () => mine && onMove(STATUS.SirayaAlindi),\n          disabled: !mine,\n          title: !mine ? \"Sadece atanan işlem yapabilir\" : undefined,\n          children: \"S\\u0131raya al\\u0131nd\\u0131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: () => mine && onMove(STATUS.IslemeAlindi),\n          disabled: !mine,\n          title: !mine ? \"Sadece atanan işlem yapabilir\" : undefined,\n          children: \"\\u0130\\u015Fleme al\\u0131nd\\u0131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: () => mine && onMove(STATUS.TestEdiliyor),\n          disabled: !mine,\n          title: !mine ? \"Sadece atanan işlem yapabilir\" : undefined,\n          children: \"Test ediliyor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary xs\",\n          onClick: mine ? onDone : undefined,\n          disabled: !mine,\n          title: !mine ? \"Sadece atanan işlem yapabilir\" : undefined,\n          children: \"Tamamla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 651,\n    columnNumber: 9\n  }, this);\n}\n_c2 = Card;\nfunction Section({\n  title,\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sec\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-h\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-b\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 714,\n    columnNumber: 9\n  }, this);\n}\n\n/* utils */\n_c3 = Section;\nfunction slug(s) {\n  return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\");\n}\nfunction fmtTime(ts) {\n  try {\n    return new Date(ts).toLocaleString();\n  } catch {\n    return \"—\";\n  }\n}\nfunction fmtDate(ts) {\n  try {\n    return new Date(ts).toLocaleDateString();\n  } catch {\n    return \"—\";\n  }\n}\n\n/* ------ realtime yardımcıları ------ */\nfunction dateNum(v) {\n  try {\n    return new Date(v).getTime() || 0;\n  } catch {\n    return 0;\n  }\n}\nfunction sortRows(list, mineOnly, view) {\n  const a = [...(list || [])];\n  if (view === \"list\" && !mineOnly) {\n    a.sort((x, y) => {\n      var _x$global_sira, _y$global_sira, _x$id, _y$id;\n      const gx = (_x$global_sira = x.global_sira) !== null && _x$global_sira !== void 0 ? _x$global_sira : 1e15;\n      const gy = (_y$global_sira = y.global_sira) !== null && _y$global_sira !== void 0 ? _y$global_sira : 1e15;\n      if (gx !== gy) return gx - gy;\n      const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\n      if (tx !== 0) return tx;\n      return ((_x$id = x.id) !== null && _x$id !== void 0 ? _x$id : 0) - ((_y$id = y.id) !== null && _y$id !== void 0 ? _y$id : 0);\n    });\n  } else if (mineOnly) {\n    a.sort((x, y) => {\n      var _x$atanan_sira, _y$atanan_sira, _x$id2, _y$id2;\n      const ax = (_x$atanan_sira = x.atanan_sira) !== null && _x$atanan_sira !== void 0 ? _x$atanan_sira : 1e15;\n      const ay = (_y$atanan_sira = y.atanan_sira) !== null && _y$atanan_sira !== void 0 ? _y$atanan_sira : 1e15;\n      if (ax !== ay) return ax - ay;\n      const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\n      if (tx !== 0) return tx;\n      return ((_x$id2 = x.id) !== null && _x$id2 !== void 0 ? _x$id2 : 0) - ((_y$id2 = y.id) !== null && _y$id2 !== void 0 ? _y$id2 : 0);\n    });\n  } else {\n    a.sort((x, y) => {\n      var _x$kolon_sira, _y$kolon_sira, _x$id3, _y$id3;\n      const kx = (_x$kolon_sira = x.kolon_sira) !== null && _x$kolon_sira !== void 0 ? _x$kolon_sira : 1e15;\n      const ky = (_y$kolon_sira = y.kolon_sira) !== null && _y$kolon_sira !== void 0 ? _y$kolon_sira : 1e15;\n      if (kx !== ky) return kx - ky;\n      const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\n      if (tx !== 0) return tx;\n      return ((_x$id3 = x.id) !== null && _x$id3 !== void 0 ? _x$id3 : 0) - ((_y$id3 = y.id) !== null && _y$id3 !== void 0 ? _y$id3 : 0);\n    });\n  }\n  return a;\n}\nfunction applyRealtime(prev, payload, mineOnly, view) {\n  const type = payload.eventType;\n  const next = [...prev];\n  if (type === \"DELETE\") {\n    return next.filter(r => {\n      var _payload$old;\n      return r.id !== ((_payload$old = payload.old) === null || _payload$old === void 0 ? void 0 : _payload$old.id);\n    });\n  }\n  const row = payload.new;\n  const i = next.findIndex(r => r.id === row.id);\n  if (i === -1) next.push(row);else next[i] = {\n    ...next[i],\n    ...row\n  };\n  return sortRows(next, mineOnly, view);\n}\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"InboxModern\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Section\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useNavigate","Link","DragDropContext","Droppable","Draggable","supabase","jsxDEV","_jsxDEV","STATUS","Yeni","SirayaAlindi","IslemeAlindi","TestEdiliyor","Tamamlandi","STATUS_DISPLAY","BOARD_COLUMNS","key","title","PILL_COLOR","P1","P2","P3","trUp","s","trim","toLocaleUpperCase","ALLOWED_NAMES","Set","computeIsEditor","profile","isEditor","birim","has","kullanici","email","GAP","between","prev","next","hasPrev","Number","isFinite","hasNext","InboxModern","_s","navigate","me","JSON","parse","localStorage","getItem","myEmail","myName","canEdit","view","setView","q","setQ","mineOnly","setMineOnly","onlySLA","setOnlySLA","loading","setLoading","saving","setSaving","err","setErr","rows","setRows","active","setActive","mineOnlyRef","current","token","replace","fetchData","channel","on","event","schema","table","payload","applyRealtime","subscribe","removeChannel","sortRows","query","from","select","order","ascending","nullsFirst","eq","t24","Date","now","toISOString","lt","not","data","error","limit","e","console","groupByStatus","items","map","Object","fromEntries","c","forEach","i","durum","push","k","keys","sort","a","b","_a$kolon_sira","_b$kolon_sira","kolon_sira","updateRow","id","changes","update","guncelleme_tarihi","message","onBoardDragEnd","result","_dstArr","_dstArr2","source","destination","draggableId","statusFrom","droppableId","statusTo","byStatus","srcArr","dstArr","idx","findIndex","String","item","atanan_email","splice","destIndex","index","newKolonSira","newDurum","prevRows","r","onListDragEnd","_listMine","_listMine2","_list","_list2","list","filtered","moved","to","global_sira","newGlobal","listMine","filter","atanan_sira","newRank","takeOwnership","_dst","_mineList","row","find","dst","last","length","undefined","mineList","_a$atanan_sira","_b$atanan_sira","lastMine","newMyRank","atanan_kullanici","moveTo","statusKey","_dst2","markDone","handleLogout","removeItem","text","baslik","talep_eden_email","talep_eden_kullanici","toLowerCase","includes","grouped","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","type","checked","onDragEnd","col","isDropDisabled","provided","ref","innerRef","droppableProps","slug","isDragDisabled","pp","draggableProps","dragHandleProps","Card","onOpen","onTake","onMove","st","onDone","_r$atanan_sira","oncelik","style","marginLeft","opacity","fmtTime","padding","role","sla_son_tarih","getTime","Section","aciklama","disabled","bitis_tarihi","fmtDate","_c","mine","slaSoon","fromLabel","toLabel","_c2","_c3","replaceAll","ts","toLocaleString","toLocaleDateString","dateNum","v","x","y","_x$global_sira","_y$global_sira","_x$id","_y$id","gx","gy","tx","_x$atanan_sira","_y$atanan_sira","_x$id2","_y$id2","ax","ay","_x$kolon_sira","_y$kolon_sira","_x$id3","_y$id3","kx","ky","eventType","_payload$old","old","new","$RefreshReg$"],"sources":["C:/Users/Gorkem.Cadirci/talep-sistemi/src/pages/Inbox.js"],"sourcesContent":["// src/pages/Inbox.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\r\nimport supabase from \"../supabaseClient\";\r\nimport \"./Inbox.css\";\r\n\r\n/**\r\n * Realtime için:\r\n *   alter publication supabase_realtime add table public.talepler;\r\n *\r\n * Not: Bu sürüm \"tek satır güncelle\" stratejisi kullanır.\r\n * - Kanban sürükle-bırak: sadece taşınan kaydı update eder (kolon_sira = komşuların ortası)\r\n * - Liste sürükle-bırak: yalnızca taşınan kaydın atanan_sira/global_sira değerini günceller\r\n */\r\n\r\n/* ---- DURUMLAR (DB Kodları) ---- */\r\nconst STATUS = {\r\n    Yeni: \"Yeni\",\r\n    SirayaAlindi: \"SirayaAlindi\",\r\n    IslemeAlindi: \"IslemeAlindi\",\r\n    TestEdiliyor: \"TestEdiliyor\",\r\n    Tamamlandi: \"Tamamlandi\",\r\n};\r\n\r\nconst STATUS_DISPLAY = {\r\n    [STATUS.Yeni]: \"Yeni\",\r\n    [STATUS.SirayaAlindi]: \"Sıraya Alındı\",\r\n    [STATUS.IslemeAlindi]: \"İşleme Alındı\",\r\n    [STATUS.TestEdiliyor]: \"Test Ediliyor\",\r\n    [STATUS.Tamamlandi]: \"Tamamlandı\",\r\n};\r\n\r\nconst BOARD_COLUMNS = [\r\n    { key: STATUS.Yeni, title: STATUS_DISPLAY[STATUS.Yeni] },\r\n    { key: STATUS.SirayaAlindi, title: STATUS_DISPLAY[STATUS.SirayaAlindi] },\r\n    { key: STATUS.IslemeAlindi, title: STATUS_DISPLAY[STATUS.IslemeAlindi] },\r\n    { key: STATUS.TestEdiliyor, title: STATUS_DISPLAY[STATUS.TestEdiliyor] },\r\n    { key: STATUS.Tamamlandi, title: STATUS_DISPLAY[STATUS.Tamamlandi] },\r\n];\r\n\r\nconst PILL_COLOR = { P1: \"p1\", P2: \"p2\", P3: \"p3\" };\r\n\r\n/* ---- YETKİ ---- */\r\nfunction trUp(s) {\r\n    return (s || \"\").trim().toLocaleUpperCase(\"tr-TR\");\r\n}\r\nconst ALLOWED_NAMES = new Set([\"GÖRKEM ÇADIRCI\", \"FURKAN BİLGİLİ\", \"YAĞIZ EFE BULUTCU\"]);\r\nfunction computeIsEditor(profile) {\r\n    if (profile && typeof profile.isEditor === \"boolean\") return profile.isEditor;\r\n    return (\r\n        trUp(profile?.birim) === \"İŞ VE SÜREÇ GELİŞTİRME\" &&\r\n        ALLOWED_NAMES.has(trUp(profile?.kullanici || profile?.email))\r\n    );\r\n}\r\n\r\n/* ---- SIRALAMA YARDIMCI ----\r\n   Sadece taşınan karta yeni sıra değeri vermek için \"araya yerleştir\" yaklaşımı.\r\n*/\r\nconst GAP = 1000;\r\nfunction between(prev, next) {\r\n    const hasPrev = Number.isFinite(prev);\r\n    const hasNext = Number.isFinite(next);\r\n    if (hasPrev && hasNext) return (prev + next) / 2;\r\n    if (hasPrev && !hasNext) return prev + GAP;\r\n    if (!hasPrev && hasNext) return next - GAP;\r\n    return GAP; // boş kolona ilk eleman\r\n}\r\n\r\n/* ---- BİLEŞEN ---- */\r\nexport default function InboxModern() {\r\n    const navigate = useNavigate();\r\n\r\n    const me = useMemo(() => {\r\n        try { return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\"); }\r\n        catch { return {}; }\r\n    }, []);\r\n    const myEmail = me?.email || \"\";\r\n    const myName = (me?.kullanici || \"\").trim();\r\n    const canEdit = useMemo(() => computeIsEditor(me), [me]);\r\n\r\n    const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\r\n    const [q, setQ] = useState(\"\");\r\n    const [mineOnly, setMineOnly] = useState(false);\r\n    const [onlySLA, setOnlySLA] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const [err, setErr] = useState(\"\");\r\n    const [rows, setRows] = useState([]);\r\n    const [active, setActive] = useState(null);\r\n\r\n    const mineOnlyRef = useRef(mineOnly);\r\n    useEffect(() => { mineOnlyRef.current = mineOnly; }, [mineOnly]);\r\n\r\n    // auth guard\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"auth_token\");\r\n        if (!token) navigate(\"/login\", { replace: true });\r\n    }, [navigate]);\r\n\r\n    // data\r\n    useEffect(() => { fetchData(); /* eslint-disable-next-line */ }, [mineOnly, onlySLA, view]);\r\n\r\n    // realtime\r\n    useEffect(() => {\r\n        const channel = supabase\r\n            .channel(\"talepler-realtime\")\r\n            .on(\"postgres_changes\", { event: \"*\", schema: \"public\", table: \"talepler\" },\r\n                (payload) => setRows((prev) => applyRealtime(prev, payload, mineOnlyRef.current, view)))\r\n            .subscribe();\r\n        return () => supabase.removeChannel(channel);\r\n    }, [view]);\r\n\r\n    // görünüm değişince sırala\r\n    useEffect(() => { setRows((prev) => sortRows(prev, mineOnly, view)); }, [mineOnly, view]);\r\n\r\n    async function fetchData() {\r\n        if (!myEmail) return;\r\n        setLoading(true);\r\n        setErr(\"\");\r\n        try {\r\n            let query = supabase.from(\"talepler\").select(`\r\n        id, baslik, durum, oncelik,\r\n        talep_eden_email, atanan_email,\r\n        talep_eden_kullanici, atanan_kullanici,\r\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama,\r\n        kolon_sira, atanan_sira, global_sira\r\n      `);\r\n\r\n            if (view === \"list\" && !mineOnly) {\r\n                query = query\r\n                    .order(\"global_sira\", { ascending: true, nullsFirst: true })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            } else if (mineOnly) {\r\n                query = query\r\n                    .eq(\"atanan_email\", myEmail)\r\n                    .order(\"atanan_sira\", { ascending: true, nullsFirst: false })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            } else {\r\n                query = query\r\n                    .order(\"kolon_sira\", { ascending: true, nullsFirst: true })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            }\r\n\r\n            if (onlySLA) {\r\n                const t24 = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();\r\n                query = query\r\n                    .lt(\"sla_son_tarih\", t24)\r\n                    .not(\"durum\", \"in\", '(\"Tamamlandi\",\"Reddedildi\")');\r\n            }\r\n\r\n            const { data, error } = await query.limit(500);\r\n            if (error) throw error;\r\n\r\n            setRows(sortRows(data || [], mineOnly, view));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Kayıtlar çekilemedi.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    /* ---------- helpers ---------- */\r\n    function groupByStatus(items) {\r\n        const map = Object.fromEntries(BOARD_COLUMNS.map((c) => [c.key, []]));\r\n        items.forEach((i) => { (map[i.durum || STATUS.Yeni] ??= []).push(i); });\r\n        // her kolonu kendi içinde kolon_sira'ya göre sırala (null sona)\r\n        for (const k of Object.keys(map)) {\r\n            map[k].sort((a, b) => (a.kolon_sira ?? 1e15) - (b.kolon_sira ?? 1e15));\r\n        }\r\n        return map;\r\n    }\r\n\r\n    // sadece tek kayıt update eden yardımcı\r\n    async function updateRow(id, changes) {\r\n        setSaving(true);\r\n        const { error } = await supabase.from(\"talepler\").update({\r\n            ...changes,\r\n            guncelleme_tarihi: new Date().toISOString(),\r\n        }).eq(\"id\", id);\r\n        setSaving(false);\r\n        if (error) {\r\n            console.error(\"updateRow error\", error);\r\n            setErr(error.message || \"Güncelleme başarısız.\");\r\n            // optimistic'i geri almak yerine taze veri çek\r\n            fetchData();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /* ---------- DnD: Kanban (tek kayıt güncelle) ---------- */\r\n    async function onBoardDragEnd(result) {\r\n        if (!canEdit) return;\r\n        const { source, destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        const statusFrom = source.droppableId;\r\n        const statusTo = destination.droppableId;\r\n\r\n        const byStatus = groupByStatus([...rows]);\r\n        const srcArr = byStatus[statusFrom];\r\n        const dstArr = byStatus[statusTo];\r\n\r\n        const idx = srcArr.findIndex((i) => String(i.id) === String(draggableId));\r\n        if (idx === -1) return;\r\n\r\n        const item = srcArr[idx];\r\n        if (item.atanan_email !== myEmail) {\r\n            setErr(\"Bu kart size atanmadığı için taşıyamazsınız.\");\r\n            return;\r\n        }\r\n\r\n        // UI'de önce göster\r\n        srcArr.splice(idx, 1);\r\n        const destIndex = destination.index;\r\n        dstArr.splice(destIndex, 0, item);\r\n\r\n        // yeni kolon_sira'yı yalnızca taşınan karta hesapla\r\n        const prev = dstArr[destIndex - 1]?.kolon_sira;\r\n        const next = dstArr[destIndex + 1]?.kolon_sira;\r\n        const newKolonSira = between(prev, next);\r\n        const newDurum = statusTo;\r\n\r\n        // optimistic\r\n        setRows((prevRows) =>\r\n            sortRows(\r\n                prevRows.map((r) =>\r\n                    r.id === item.id ? { ...r, durum: newDurum, kolon_sira: newKolonSira } : r\r\n                ),\r\n                mineOnly,\r\n                view\r\n            )\r\n        );\r\n\r\n        // persist: TEK PATCH\r\n        await updateRow(item.id, { durum: newDurum, kolon_sira: newKolonSira });\r\n    }\r\n\r\n    /* ---------- DnD: Liste (tek kayıt güncelle) ---------- */\r\n    async function onListDragEnd(result) {\r\n        const { destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        if (!mineOnly) {\r\n            // GLOBAL sıra: sadece editörler\r\n            if (!canEdit) return;\r\n\r\n            // UI listesinde mevcut sıraya göre çalış\r\n            const list = [...filtered];\r\n            const from = list.findIndex((i) => String(i.id) === String(draggableId));\r\n            if (from === -1) return;\r\n            const moved = list[from];\r\n            list.splice(from, 1);\r\n            const to = destination.index;\r\n            list.splice(to, 0, moved);\r\n\r\n            const prev = list[to - 1]?.global_sira;\r\n            const next = list[to + 1]?.global_sira;\r\n            const newGlobal = between(prev, next);\r\n\r\n            // optimistic\r\n            setRows((prevRows) =>\r\n                sortRows(\r\n                    prevRows.map((r) => (r.id === moved.id ? { ...r, global_sira: newGlobal } : r)),\r\n                    mineOnly,\r\n                    view\r\n                )\r\n            );\r\n\r\n            await updateRow(moved.id, { global_sira: newGlobal });\r\n            return;\r\n        }\r\n\r\n        // mineOnly: sadece bana atanmış kuyruk sırası\r\n        if (!canEdit) return;\r\n\r\n        const listMine = filtered.filter((r) => r.atanan_email === myEmail);\r\n        const from = listMine.findIndex((i) => String(i.id) === String(draggableId));\r\n        if (from === -1) return;\r\n        const moved = listMine[from];\r\n        listMine.splice(from, 1);\r\n        const to = destination.index;\r\n        listMine.splice(to, 0, moved);\r\n\r\n        const prev = listMine[to - 1]?.atanan_sira;\r\n        const next = listMine[to + 1]?.atanan_sira;\r\n        const newRank = between(prev, next);\r\n\r\n        // optimistic\r\n        setRows((prevRows) =>\r\n            sortRows(\r\n                prevRows.map((r) => (r.id === moved.id ? { ...r, atanan_sira: newRank } : r)),\r\n                mineOnly,\r\n                view\r\n            )\r\n        );\r\n\r\n        await updateRow(moved.id, { atanan_sira: newRank });\r\n    }\r\n\r\n    /* ---------- quick actions ---------- */\r\n    async function takeOwnership(id) {\r\n        if (!canEdit || !myEmail) return;\r\n        const row = rows.find((r) => r.id === id);\r\n        if (row && row.atanan_email && row.atanan_email !== myEmail) {\r\n            setErr(\"Bu kayıt size atanmadığı için işlem yapamazsınız.\");\r\n            return;\r\n        }\r\n\r\n        // hedef sütunda en alta (tek güncelleme)\r\n        const byStatus = groupByStatus(rows);\r\n        const dst = byStatus[STATUS.SirayaAlindi];\r\n        const last = dst[dst.length - 1]?.kolon_sira;\r\n        const newKolonSira = between(last, undefined);\r\n\r\n        // kişisel kuyruğun en sonuna\r\n        const mineList = rows.filter((r) => r.atanan_email === myEmail).sort((a, b) => (a.atanan_sira ?? 0) - (b.atanan_sira ?? 0));\r\n        const lastMine = mineList[mineList.length - 1]?.atanan_sira;\r\n        const newMyRank = between(lastMine, undefined);\r\n\r\n        // optimistic\r\n        setRows((prevRows) =>\r\n            sortRows(\r\n                prevRows.map((r) =>\r\n                    r.id === id\r\n                        ? {\r\n                            ...r,\r\n                            atanan_email: myEmail,\r\n                            atanan_kullanici: myName || null,\r\n                            durum: STATUS.SirayaAlindi,\r\n                            kolon_sira: newKolonSira,\r\n                            atanan_sira: newMyRank,\r\n                        }\r\n                        : r\r\n                ),\r\n                mineOnly,\r\n                view\r\n            )\r\n        );\r\n\r\n        await updateRow(id, {\r\n            atanan_email: myEmail,\r\n            atanan_kullanici: myName || null,\r\n            durum: STATUS.SirayaAlindi,\r\n            kolon_sira: newKolonSira,\r\n            atanan_sira: newMyRank,\r\n        });\r\n    }\r\n\r\n    async function moveTo(id, statusKey) {\r\n        if (!canEdit) return;\r\n        const row = rows.find((r) => r.id === id);\r\n        if (!row || row.atanan_email !== myEmail) {\r\n            setErr(\"Bu kayıt size atanmadığı için işlem yapamazsınız.\");\r\n            return;\r\n        }\r\n\r\n        // hedef kolondaki yerine en alta koy\r\n        const byStatus = groupByStatus(rows);\r\n        const dst = byStatus[statusKey];\r\n        const last = dst[dst.length - 1]?.kolon_sira;\r\n        const newKolonSira = between(last, undefined);\r\n\r\n        // optimistic\r\n        setRows((prevRows) =>\r\n            sortRows(\r\n                prevRows.map((r) =>\r\n                    r.id === id ? { ...r, durum: statusKey, kolon_sira: newKolonSira } : r\r\n                ),\r\n                mineOnly,\r\n                view\r\n            )\r\n        );\r\n\r\n        await updateRow(id, { durum: statusKey, kolon_sira: newKolonSira });\r\n    }\r\n\r\n    async function markDone(id) {\r\n        await moveTo(id, STATUS.Tamamlandi);\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(\"auth_token\");\r\n        localStorage.removeItem(\"user_profile\");\r\n        navigate(\"/login\", { replace: true });\r\n    }\r\n\r\n    /* ---------- filter ---------- */\r\n    const filtered = rows.filter((r) => {\r\n        if (!q) return true;\r\n        const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"} ${r.talep_eden_kullanici || \"\"} ${r.atanan_kullanici || \"\"}`.toLowerCase();\r\n        return text.includes(q.toLowerCase());\r\n    });\r\n\r\n    const grouped = groupByStatus(filtered);\r\n\r\n    return (\r\n        <div className=\"mx\">\r\n            {/* Command bar */}\r\n            <div className=\"mx-top\">\r\n                <div className=\"brand\">\r\n                    <div className=\"logo\">🧭</div>\r\n                    <div className=\"bt\">\r\n                        <h1>Gelen Kutusu</h1>\r\n                        <span className=\"muted\">İş & Süreç Geliştirme</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"cmd\">\r\n                    <div className=\"seg\">\r\n                        <button className={`seg-btn ${view === \"board\" ? \"on\" : \"\"}`} onClick={() => setView(\"board\")}>Kanban</button>\r\n                        <button className={`seg-btn ${view === \"list\" ? \"on\" : \"\"}`} onClick={() => setView(\"list\")}>Liste</button>\r\n                    </div>\r\n\r\n                    <div className=\"search-wrap\">\r\n                        <input className=\"search\" placeholder=\"Ara: #id, başlık, kişi…\" value={q} onChange={(e) => setQ(e.target.value)} />\r\n                    </div>\r\n\r\n                    <div className=\"toggles\">\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={mineOnly} onChange={(e) => setMineOnly(e.target.checked)} />\r\n                            <span>Bana atananlar</span>\r\n                        </label>\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={onlySLA} onChange={(e) => setOnlySLA(e.target.checked)} />\r\n                            <span>SLA (&lt;24s)</span>\r\n                        </label>\r\n                    </div>\r\n\r\n                    <Link to=\"/newrequest\" className=\"btn primary\">+ Yeni Talep</Link>\r\n                    <div className=\"chip\">{(me?.kullanici || me?.email) + (canEdit ? \" • editör\" : \"\")}</div>\r\n                    <button className=\"btn danger\" onClick={handleLogout}>Çıkış</button>\r\n                    {saving && <div className=\"saving-ind\">Kaydediliyor…</div>}\r\n                </div>\r\n            </div>\r\n\r\n            {err && <div className=\"mx-alert err\">{err}</div>}\r\n\r\n            {loading ? (\r\n                <div className=\"mx-skel\">Yükleniyor…</div>\r\n            ) : view === \"board\" ? (\r\n                <DragDropContext onDragEnd={onBoardDragEnd}>\r\n                    <div className=\"board\">\r\n                        {BOARD_COLUMNS.map((col) => {\r\n                            const items = grouped[col.key] || [];\r\n                            return (\r\n                                <Droppable droppableId={col.key} key={col.key} isDropDisabled={!canEdit}>\r\n                                    {(provided) => (\r\n                                        <div className=\"col\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                            <div className=\"col-head\">\r\n                                                <span className={`dot s-${slug(col.title)}`}></span>\r\n                                                <h3>{col.title}</h3>\r\n                                                <span className=\"count\">{items.length}</span>\r\n                                            </div>\r\n                                            <div className=\"col-body\">\r\n                                                {items.length === 0 && <div className=\"col-empty\">Henüz kayıt yok</div>}\r\n                                                {items.map((item, index) => (\r\n                                                    <Draggable\r\n                                                        draggableId={String(item.id)}\r\n                                                        index={index}\r\n                                                        key={item.id}\r\n                                                        isDragDisabled={!canEdit || !(item.atanan_email && item.atanan_email === myEmail)}\r\n                                                    >\r\n                                                        {(pp) => (\r\n                                                            <div ref={pp.innerRef} {...pp.draggableProps} {...pp.dragHandleProps}>\r\n                                                                <Card\r\n                                                                    data={item}\r\n                                                                    onOpen={() => setActive(item)}\r\n                                                                    onTake={() => canEdit && takeOwnership(item.id)}\r\n                                                                    onMove={(st) => canEdit && moveTo(item.id, st)}\r\n                                                                    onDone={() => canEdit && markDone(item.id)}\r\n                                                                    me={myEmail}\r\n                                                                />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </Draggable>\r\n                                                ))}\r\n                                                {provided.placeholder}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </DragDropContext>\r\n            ) : (\r\n                <DragDropContext onDragEnd={onListDragEnd}>\r\n                    <Droppable droppableId=\"listMine\" isDropDisabled={!canEdit && !mineOnly}>\r\n                        {(provided) => (\r\n                            <div className=\"listv\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                {filtered.length === 0 && <div className=\"col-empty\">Kayıt bulunamadı</div>}\r\n                                {filtered.map((r, index) => (\r\n                                    <Draggable\r\n                                        draggableId={String(r.id)}\r\n                                        index={index}\r\n                                        key={r.id}\r\n                                        isDragDisabled={!canEdit && !mineOnly}\r\n                                    >\r\n                                        {(pp) => (\r\n                                            <div\r\n                                                ref={pp.innerRef}\r\n                                                {...pp.draggableProps}\r\n                                                {...pp.dragHandleProps}\r\n                                                className=\"rowv\"\r\n                                                onClick={() => setActive(r)}\r\n                                            >\r\n                                                <span className={`pill ${PILL_COLOR[r.oncelik] || \"p3\"}`}>{r.oncelik || \"P3\"}</span>\r\n                                                <span className={`badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`}>\r\n                                                    {STATUS_DISPLAY[r.durum] || \"Yeni\"}\r\n                                                </span>\r\n                                                <span className=\"r-title\">#{r.id} — {r.baslik}</span>\r\n                                                <span className=\"r-sub\">\r\n                                                    {(r.talep_eden_kullanici || r.talep_eden_email) || \"—\"} → {(r.atanan_kullanici || r.atanan_email) || \"—\"}\r\n                                                    {mineOnly && r.atanan_email === myEmail && (\r\n                                                        <b style={{ marginLeft: 8, opacity: 0.8 }}>(Sıra: {r.atanan_sira ?? \"—\"})</b>\r\n                                                    )}\r\n                                                </span>\r\n                                                <span className=\"r-time\">{fmtTime(r.guncelleme_tarihi)}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </Draggable>\r\n                                ))}\r\n                                {provided.placeholder}\r\n                                {!mineOnly && (\r\n                                    <div className=\"hint\" style={{ padding: 8, opacity: 0.7 }}>\r\n                                        {canEdit\r\n                                            ? \"Bu listede sürüklediğin sıra herkese yansır.\"\r\n                                            : \"Sıralamayı yalnızca yetkili kullanıcılar değiştirebilir.\"}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </Droppable>\r\n                </DragDropContext>\r\n            )}\r\n\r\n            {/* Detay çekmecesi */}\r\n            {active && (\r\n                <div className=\"drawer\" role=\"dialog\" aria-modal=\"true\">\r\n                    <div className=\"drawer-panel\">\r\n                        <button className=\"drawer-close\" onClick={() => setActive(null)}>×</button>\r\n\r\n                        <div className=\"drawer-top\">\r\n                            <span className={`pill ${PILL_COLOR[active.oncelik] || \"p3\"}`}>{active.oncelik || \"P3\"}</span>\r\n                            <span className={`badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`}>\r\n                                {STATUS_DISPLAY[active.durum] || \"Yeni\"}\r\n                            </span>\r\n                            {active.sla_son_tarih &&\r\n                                new Date(active.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000 && (\r\n                                    <span className=\"sla\">SLA</span>\r\n                                )}\r\n                            <h2>#{active.id} — {active.baslik}</h2>\r\n                            <div className=\"d-sub\">\r\n                                <span>İsteyen: <b>{active.talep_eden_kullanici || active.talep_eden_email}</b></span>\r\n                                <span> · </span>\r\n                                <span>Atanan: <b>{active.atanan_kullanici || active.atanan_email || \"—\"}</b></span>\r\n                                <span> · </span>\r\n                                <span>Güncellendi: {fmtTime(active.guncelleme_tarihi)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"drawer-body\">\r\n                            <Section title=\"Açıklama\">\r\n                                <p className=\"desc\">{active.aciklama || \"Açıklama girilmemiş.\"}</p>\r\n                            </Section>\r\n\r\n                            <Section title=\"Hızlı İşlemler\">\r\n                                <div className=\"act-grid\">\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => { if (canEdit) { setActive(null); takeOwnership(active.id); } }}\r\n                                        disabled={!canEdit || (!!active.atanan_email && active.atanan_email !== myEmail)}\r\n                                        title={\r\n                                            !canEdit\r\n                                                ? \"Yalnızca yetkili kullanıcılar işlem yapabilir\"\r\n                                                : active.atanan_email && active.atanan_email !== myEmail\r\n                                                    ? \"Sadece atanan işlem yapabilir\"\r\n                                                    : undefined\r\n                                        }\r\n                                    >\r\n                                        Üstlen\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => { if (canEdit && active.atanan_email === myEmail) { setActive(null); moveTo(active.id, STATUS.SirayaAlindi); } }}\r\n                                        disabled={!canEdit || active.atanan_email !== myEmail}\r\n                                        title={!canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined}\r\n                                    >\r\n                                        Sıraya alındı\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => { if (canEdit && active.atanan_email === myEmail) { setActive(null); moveTo(active.id, STATUS.IslemeAlindi); } }}\r\n                                        disabled={!canEdit || active.atanan_email !== myEmail}\r\n                                        title={!canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined}\r\n                                    >\r\n                                        İşleme alındı\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => { if (canEdit && active.atanan_email === myEmail) { setActive(null); moveTo(active.id, STATUS.TestEdiliyor); } }}\r\n                                        disabled={!canEdit || active.atanan_email !== myEmail}\r\n                                        title={!canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined}\r\n                                    >\r\n                                        Test ediliyor\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        className=\"btn primary\"\r\n                                        onClick={() => { if (canEdit && active.atanan_email === myEmail) { setActive(null); markDone(active.id); } }}\r\n                                        disabled={!canEdit || active.atanan_email !== myEmail}\r\n                                        title={!canEdit ? \"Yalnızca yetkili kullanıcılar\" : active.atanan_email !== myEmail ? \"Sadece atanan\" : undefined}\r\n                                    >\r\n                                        ✓ Tamamlandı\r\n                                    </button>\r\n                                </div>\r\n                            </Section>\r\n\r\n                            <Section title=\"Zaman\">\r\n                                <div className=\"kv\">\r\n                                    <div><span>Hedef Tarih:</span><b>{active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"}</b></div>\r\n                                    <div><span>SLA Son:</span><b>{active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"}</b></div>\r\n                                </div>\r\n                            </Section>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"drawer-backdrop\" onClick={() => setActive(null)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/* components */\r\nfunction Card({ data, onOpen, onTake, onMove, onDone, me }) {\r\n    const mine = data.atanan_email && data.atanan_email === me;\r\n    const slaSoon =\r\n        data.sla_son_tarih &&\r\n        new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\r\n\r\n    const fromLabel = data.talep_eden_kullanici || data.talep_eden_email || \"—\";\r\n    const toLabel = data.atanan_kullanici || data.atanan_email || \"—\";\r\n\r\n    return (\r\n        <div className={`card ${mine ? \"mine\" : \"\"}`}>\r\n            <div className=\"c-top\">\r\n                <span className={`pill ${PILL_COLOR[data.oncelik] || \"p3\"}`}>{data.oncelik || \"P3\"}</span>\r\n                <span className={`badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`}>\r\n                    {STATUS_DISPLAY[data.durum] || \"Yeni\"}\r\n                </span>\r\n                {slaSoon && <span className=\"sla\">SLA</span>}\r\n                <button className=\"icn\" onClick={onOpen} title=\"Detay\">⋯</button>\r\n            </div>\r\n\r\n            <div className=\"c-title\">#{data.id} — {data.baslik}</div>\r\n            <div className=\"c-sub\">\r\n                <span>{fromLabel}</span>\r\n                <span>→</span>\r\n                <span>{toLabel}</span>\r\n            </div>\r\n\r\n            <div className=\"c-foot\">\r\n                <span className=\"time\">{fmtTime(data.guncelleme_tarihi)}</span>\r\n                <div className=\"act\">\r\n                    {!data.atanan_email && (\r\n                        <button className=\"btn ghost xs\" onClick={onTake}>Üstlen</button>\r\n                    )}\r\n                    <button\r\n                        className=\"btn ghost xs\"\r\n                        onClick={() => mine && onMove(STATUS.SirayaAlindi)}\r\n                        disabled={!mine}\r\n                        title={!mine ? \"Sadece atanan işlem yapabilir\" : undefined}\r\n                    >\r\n                        Sıraya alındı\r\n                    </button>\r\n                    <button\r\n                        className=\"btn ghost xs\"\r\n                        onClick={() => mine && onMove(STATUS.IslemeAlindi)}\r\n                        disabled={!mine}\r\n                        title={!mine ? \"Sadece atanan işlem yapabilir\" : undefined}\r\n                    >\r\n                        İşleme alındı\r\n                    </button>\r\n                    <button\r\n                        className=\"btn ghost xs\"\r\n                        onClick={() => mine && onMove(STATUS.TestEdiliyor)}\r\n                        disabled={!mine}\r\n                        title={!mine ? \"Sadece atanan işlem yapabilir\" : undefined}\r\n                    >\r\n                        Test ediliyor\r\n                    </button>\r\n                    <button\r\n                        className=\"btn primary xs\"\r\n                        onClick={mine ? onDone : undefined}\r\n                        disabled={!mine}\r\n                        title={!mine ? \"Sadece atanan işlem yapabilir\" : undefined}\r\n                    >\r\n                        Tamamla\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Section({ title, children }) {\r\n    return (\r\n        <section className=\"sec\">\r\n            <div className=\"sec-h\"><h4>{title}</h4></div>\r\n            <div className=\"sec-b\">{children}</div>\r\n        </section>\r\n    );\r\n}\r\n\r\n/* utils */\r\nfunction slug(s) {\r\n    return (s || \"\")\r\n        .toLowerCase()\r\n        .replaceAll(\"ı\", \"i\")\r\n        .replaceAll(\"ğ\", \"g\")\r\n        .replaceAll(\"ş\", \"s\")\r\n        .replaceAll(\"ö\", \"o\")\r\n        .replaceAll(\"ç\", \"c\")\r\n        .replaceAll(\"ü\", \"u\")\r\n        .replace(/\\s+/g, \"-\");\r\n}\r\nfunction fmtTime(ts) { try { return new Date(ts).toLocaleString(); } catch { return \"—\"; } }\r\nfunction fmtDate(ts) { try { return new Date(ts).toLocaleDateString(); } catch { return \"—\"; } }\r\n\r\n/* ------ realtime yardımcıları ------ */\r\nfunction dateNum(v) { try { return new Date(v).getTime() || 0; } catch { return 0; } }\r\n\r\nfunction sortRows(list, mineOnly, view) {\r\n    const a = [...(list || [])];\r\n    if (view === \"list\" && !mineOnly) {\r\n        a.sort((x, y) => {\r\n            const gx = x.global_sira ?? 1e15;\r\n            const gy = y.global_sira ?? 1e15;\r\n            if (gx !== gy) return gx - gy;\r\n            const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\r\n            if (tx !== 0) return tx;\r\n            return (x.id ?? 0) - (y.id ?? 0);\r\n        });\r\n    } else if (mineOnly) {\r\n        a.sort((x, y) => {\r\n            const ax = x.atanan_sira ?? 1e15;\r\n            const ay = y.atanan_sira ?? 1e15;\r\n            if (ax !== ay) return ax - ay;\r\n            const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\r\n            if (tx !== 0) return tx;\r\n            return (x.id ?? 0) - (y.id ?? 0);\r\n        });\r\n    } else {\r\n        a.sort((x, y) => {\r\n            const kx = x.kolon_sira ?? 1e15;\r\n            const ky = y.kolon_sira ?? 1e15;\r\n            if (kx !== ky) return kx - ky;\r\n            const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\r\n            if (tx !== 0) return tx;\r\n            return (x.id ?? 0) - (y.id ?? 0);\r\n        });\r\n    }\r\n    return a;\r\n}\r\n\r\nfunction applyRealtime(prev, payload, mineOnly, view) {\r\n    const type = payload.eventType;\r\n    const next = [...prev];\r\n    if (type === \"DELETE\") {\r\n        return next.filter((r) => r.id !== payload.old?.id);\r\n    }\r\n    const row = payload.new;\r\n    const i = next.findIndex((r) => r.id === row.id);\r\n    if (i === -1) next.push(row);\r\n    else next[i] = { ...next[i], ...row };\r\n    return sortRows(next, mineOnly, view);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}