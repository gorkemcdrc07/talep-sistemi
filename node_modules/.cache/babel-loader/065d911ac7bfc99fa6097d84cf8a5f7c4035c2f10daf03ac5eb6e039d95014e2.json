{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gorkem.Cadirci\\\\talep-sistemi\\\\src\\\\pages\\\\Inbox.js\",\n  _s = $RefreshSig$();\n// src/pages/Inbox.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\nimport supabase from \"../supabaseClient\";\nimport \"./Inbox.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS_DISPLAY = {\n  Yeni: \"Yeni\",\n  Inceleme: \"İnceleme\",\n  Atandi: \"Atandı\",\n  Calisiliyor: \"Çalışılıyor\",\n  Beklemede: \"Beklemede\",\n  Tamamlandi: \"Tamamlandı\"\n};\nconst BOARD_COLUMNS = [{\n  key: \"Yeni\",\n  title: \"Yeni\"\n}, {\n  key: \"Inceleme\",\n  title: \"İnceleme\"\n}, {\n  key: \"Atandi\",\n  title: \"Atandı\"\n}, {\n  key: \"Calisiliyor\",\n  title: \"Çalışılıyor\"\n}, {\n  key: \"Beklemede\",\n  title: \"Beklemede\"\n}, {\n  key: \"Tamamlandi\",\n  title: \"Tamamlandı\"\n}];\nconst PILL_COLOR = {\n  P1: \"p1\",\n  P2: \"p2\",\n  P3: \"p3\"\n};\nexport default function InboxModern() {\n  _s();\n  const navigate = useNavigate();\n  const me = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\");\n    } catch {\n      return {};\n    }\n  }, []);\n  const myEmail = (me === null || me === void 0 ? void 0 : me.email) || \"\";\n  const [view, setView] = useState(\"board\");\n  const [q, setQ] = useState(\"\");\n  const [mineOnly, setMineOnly] = useState(false);\n  const [onlySLA, setOnlySLA] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const [rows, setRows] = useState([]);\n  const [active, setActive] = useState(null);\n  useEffect(() => {\n    const token = localStorage.getItem(\"auth_token\");\n    if (!token) navigate(\"/login\", {\n      replace: true\n    });\n  }, [navigate]);\n  useEffect(() => {\n    fetchData(); /* eslint-disable-next-line */\n  }, [mineOnly, onlySLA]);\n  async function fetchData() {\n    if (!myEmail) return;\n    setLoading(true);\n    setErr(\"\");\n    try {\n      const now = new Date();\n      let query = supabase.from(\"talepler\").select(`\n        id, baslik, durum, oncelik, talep_eden_email, atanan_email,\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama, kolon_sira, atanan_sira\n      `).order(\"kolon_sira\", {\n        ascending: true\n      }).order(\"guncelleme_tarihi\", {\n        ascending: false\n      }).limit(500);\n      if (mineOnly) query = query.eq(\"atanan_email\", myEmail);\n      if (onlySLA) {\n        const t24 = new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString();\n        query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", [\"Tamamlandi\", \"Reddedildi\"]);\n      }\n      const {\n        data,\n        error\n      } = await query;\n      if (error) throw error;\n      setRows(data || []);\n    } catch (e) {\n      console.error(e);\n      setErr(\"Kayıtlar çekilemedi.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // --- DnD helpers\n  function groupByStatus(items) {\n    const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\n    items.forEach(i => {\n      map[i.durum || \"Yeni\"].push(i);\n    });\n    // her kolonda kolon_sira değerine göre zaten sıralı geliyor\n    return map;\n  }\n  async function persistOrder(updates) {\n    // updates = [{id, durum, kolon_sira, atanan_sira?}]\n    const payload = updates.map(u => {\n      var _u$atanan_sira;\n      return {\n        id: u.id,\n        durum: u.durum,\n        kolon_sira: u.kolon_sira,\n        atanan_sira: (_u$atanan_sira = u.atanan_sira) !== null && _u$atanan_sira !== void 0 ? _u$atanan_sira : null,\n        guncelleme_tarihi: new Date().toISOString()\n      };\n    });\n    const {\n      error\n    } = await supabase.from(\"talepler\").upsert(payload, {\n      onConflict: \"id\"\n    });\n    if (error) console.error(\"order save error\", error);\n  }\n  function recomputeAssigneeRanks(list) {\n    // aynı atanan_email için sıraları 1..N ver\n    const byA = {};\n    list.forEach(r => {\n      if (!r.atanan_email) return;\n      if (!byA[r.atanan_email]) byA[r.atanan_email] = [];\n      byA[r.atanan_email].push(r);\n    });\n    Object.values(byA).forEach(arr => {\n      arr.sort((a, b) => {\n        var _a$atanan_sira, _b$atanan_sira;\n        return ((_a$atanan_sira = a.atanan_sira) !== null && _a$atanan_sira !== void 0 ? _a$atanan_sira : 1) - ((_b$atanan_sira = b.atanan_sira) !== null && _b$atanan_sira !== void 0 ? _b$atanan_sira : 1);\n      });\n      arr.forEach((r, idx) => {\n        r.atanan_sira = idx + 1;\n      });\n    });\n  }\n  async function onDragEnd(result) {\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    const statusFrom = source.droppableId;\n    const statusTo = destination.droppableId;\n    if (statusFrom === undefined || statusTo === undefined) return;\n\n    // mevcut state’ten çalış\n    const byStatus = groupByStatus([...rows]);\n    const itemIndex = byStatus[statusFrom].findIndex(i => String(i.id) === String(draggableId));\n    if (itemIndex === -1) return;\n    const item = byStatus[statusFrom][itemIndex];\n    // kolonlar arasında çıkar/ekle\n    byStatus[statusFrom].splice(itemIndex, 1);\n    byStatus[statusTo].splice(destination.index, 0, item);\n\n    // item’in durumunu güncelle\n    item.durum = statusTo;\n\n    // her kolon için kolon_sira’yı yeniden ata (1..N)\n    BOARD_COLUMNS.forEach(col => {\n      byStatus[col.key].forEach((it, idx) => {\n        it.kolon_sira = idx + 1;\n      });\n    });\n\n    // atanan sıralarını da güncelle (kullanıcı kuyrukları)\n    const newFlat = BOARD_COLUMNS.flatMap(c => byStatus[c.key]);\n    recomputeAssigneeRanks(newFlat);\n\n    // optimistic update\n    setRows(newFlat);\n\n    // db’ye yaz\n    const updates = newFlat.map(({\n      id,\n      durum,\n      kolon_sira,\n      atanan_sira\n    }) => ({\n      id,\n      durum,\n      kolon_sira,\n      atanan_sira\n    }));\n    await persistOrder(updates);\n  }\n\n  // --- quick actions\n  async function takeOwnership(id) {\n    if (!myEmail) return;\n    // benim kolonumdaki en alta yerleştir\n    const myMax = rows.filter(r => r.durum === \"Inceleme\").reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\n    const myAssigneeMax = rows.filter(r => r.atanan_email === myEmail).reduce((m, r) => Math.max(m, r.atanan_sira || 0), 0) + 1;\n    const {\n      error\n    } = await supabase.from(\"talepler\").update({\n      atanan_email: myEmail,\n      durum: \"Inceleme\",\n      kolon_sira: myMax,\n      atanan_sira: myAssigneeMax,\n      guncelleme_tarihi: new Date().toISOString()\n    }).eq(\"id\", id);\n    if (!error) fetchData();\n  }\n  async function moveTo(id, statusKey) {\n    // gittiği kolonun en altına koy\n    const max = rows.filter(r => r.durum === statusKey).reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\n    const {\n      error\n    } = await supabase.from(\"talepler\").update({\n      durum: statusKey,\n      kolon_sira: max,\n      guncelleme_tarihi: new Date().toISOString()\n    }).eq(\"id\", id);\n    if (!error) fetchData();\n  }\n  async function markDone(id) {\n    await moveTo(id, \"Tamamlandi\");\n  }\n  function handleLogout() {\n    localStorage.removeItem(\"auth_token\");\n    localStorage.removeItem(\"user_profile\");\n    navigate(\"/login\", {\n      replace: true\n    });\n  }\n\n  // filtre\n  const filtered = rows.filter(r => {\n    if (!q) return true;\n    const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"}`.toLowerCase();\n    return text.includes(q.toLowerCase());\n  });\n\n  // board groups\n  const grouped = groupByStatus(filtered);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: \"\\uD83E\\uDDED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bt\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Gelen Kutusu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"muted\",\n            children: \"\\u0130\\u015F & S\\xFCre\\xE7 Geli\\u015Ftirme\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cmd\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seg\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"board\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"board\"),\n            children: \"Kanban\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"list\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"list\"),\n            children: \"Liste\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"search\",\n            placeholder: \"Ara: #id, ba\\u015Fl\\u0131k, ki\\u015Fi\\u2026\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toggles\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: mineOnly,\n              onChange: e => setMineOnly(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Bana atananlar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: onlySLA,\n              onChange: e => setOnlySLA(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"SLA (<24s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/newrequest\",\n          className: \"btn primary\",\n          children: \"+ Yeni Talep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chip\",\n          children: (me === null || me === void 0 ? void 0 : me.kullanici) || (me === null || me === void 0 ? void 0 : me.email)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn danger\",\n          onClick: handleLogout,\n          children: \"\\xC7\\u0131k\\u0131\\u015F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-alert err\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 21\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-skel\",\n      children: \"Y\\xFCkleniyor\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }, this) : view === \"board\" ? /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onDragEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: BOARD_COLUMNS.map(col => {\n          const items = grouped[col.key] || [];\n          return /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: col.key,\n            children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              ref: provided.innerRef,\n              ...provided.droppableProps,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-head\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `dot s-${slug(col.title)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: col.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"count\",\n                  children: items.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-body\",\n                children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-empty\",\n                  children: \"Hen\\xFCz kay\\u0131t yok\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 72\n                }, this), items.map((item, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                  draggableId: String(item.id),\n                  index: index,\n                  children: pp => /*#__PURE__*/_jsxDEV(\"div\", {\n                    ref: pp.innerRef,\n                    ...pp.draggableProps,\n                    ...pp.dragHandleProps,\n                    children: /*#__PURE__*/_jsxDEV(Card, {\n                      data: item,\n                      onOpen: () => setActive(item),\n                      onTake: () => takeOwnership(item.id),\n                      onMove: st => moveTo(item.id, st),\n                      onDone: () => markDone(item.id),\n                      me: myEmail\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 65\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 61\n                  }, this)\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 53\n                }, this)), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 41\n            }, this)\n          }, col.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listv\",\n      children: [filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-empty\",\n        children: \"Kay\\u0131t bulunamad\\u0131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 47\n      }, this), filtered.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rowv\",\n        onClick: () => setActive(r),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `pill ${PILL_COLOR[r.oncelik] || \"p3\"}`,\n          children: r.oncelik || \"P3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`,\n          children: STATUS_DISPLAY[r.durum] || \"Yeni\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"r-title\",\n          children: [\"#\", r.id, \" \\u2014 \", r.baslik]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"r-sub\",\n          children: [r.talep_eden_email, \" \\u2192 \", r.atanan_email || \"—\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"r-time\",\n          children: fmtTime(r.guncelleme_tarihi)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 29\n        }, this)]\n      }, r.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }, this), active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drawer\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"drawer-close\",\n          onClick: () => setActive(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `pill ${PILL_COLOR[active.oncelik] || \"p3\"}`,\n            children: active.oncelik || \"P3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`,\n            children: STATUS_DISPLAY[active.durum] || \"Yeni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"#\", active.id, \" \\u2014 \", active.baslik]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-sub\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u0130steyen: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.talep_eden_email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Atanan: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.atanan_email || \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"G\\xFCncellendi: \", fmtTime(active.guncelleme_tarihi)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-body\",\n          children: [/*#__PURE__*/_jsxDEV(Section, {\n            title: \"A\\xE7\\u0131klama\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"desc\",\n              children: active.aciklama || \"Açıklama girilmemiş.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"H\\u0131zl\\u0131 \\u0130\\u015Flemler\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"act-grid\",\n              children: [!active.atanan_email && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  setActive(null);\n                  takeOwnership(active.id);\n                },\n                children: \"\\xDCstlen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  setActive(null);\n                  moveTo(active.id, \"Inceleme\");\n                },\n                children: \"\\u0130nceleme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  setActive(null);\n                  moveTo(active.id, \"Calisiliyor\");\n                },\n                children: \"\\xC7al\\u0131\\u015F\\u0131l\\u0131yor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  setActive(null);\n                  moveTo(active.id, \"Beklemede\");\n                },\n                children: \"Beklemede\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                onClick: () => {\n                  setActive(null);\n                  markDone(active.id);\n                },\n                children: \"\\u2713 Tamamland\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Zaman\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"kv\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hedef Tarih:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 67\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"SLA Son:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-backdrop\",\n        onClick: () => setActive(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, this);\n}\n\n/* components */\n_s(InboxModern, \"DUig31uHprqalMRXFYUZUHTraJg=\", false, function () {\n  return [useNavigate];\n});\n_c = InboxModern;\nfunction Card({\n  data,\n  onOpen,\n  onTake,\n  onMove,\n  onDone,\n  me\n}) {\n  const mine = data.atanan_email && data.atanan_email === me;\n  const slaSoon = data.sla_son_tarih && new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `card ${mine ? \"mine\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `pill ${PILL_COLOR[data.oncelik] || \"p3\"}`,\n        children: data.oncelik || \"P3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`,\n        children: STATUS_DISPLAY[data.durum] || \"Yeni\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 17\n      }, this), slaSoon && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sla\",\n        children: \"SLA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icn\",\n        onClick: onOpen,\n        title: \"Detay\",\n        children: \"\\u22EF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-title\",\n      children: [\"#\", data.id, \" \\u2014 \", data.baslik]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-sub\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.talep_eden_email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.atanan_email || \"—\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-foot\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"time\",\n        children: fmtTime(data.guncelleme_tarihi)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"act\",\n        children: [!data.atanan_email && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: onTake,\n          children: \"\\xDCstlen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 44\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: () => onMove(\"Inceleme\"),\n          children: \"\\u0130nceleme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost xs\",\n          onClick: () => onMove(\"Calisiliyor\"),\n          children: \"\\xC7al\\u0131\\u015F\\u0131l\\u0131yor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary xs\",\n          onClick: onDone,\n          children: \"Tamamla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 9\n  }, this);\n}\n_c2 = Card;\nfunction Section({\n  title,\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sec\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-h\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-b\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 9\n  }, this);\n}\n\n/* utils */\n_c3 = Section;\nfunction slug(s) {\n  return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\");\n}\nfunction fmtTime(ts) {\n  try {\n    return new Date(ts).toLocaleString();\n  } catch {\n    return \"—\";\n  }\n}\nfunction fmtDate(ts) {\n  try {\n    return new Date(ts).toLocaleDateString();\n  } catch {\n    return \"—\";\n  }\n}\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"InboxModern\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Section\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","Link","DragDropContext","Droppable","Draggable","supabase","jsxDEV","_jsxDEV","STATUS_DISPLAY","Yeni","Inceleme","Atandi","Calisiliyor","Beklemede","Tamamlandi","BOARD_COLUMNS","key","title","PILL_COLOR","P1","P2","P3","InboxModern","_s","navigate","me","JSON","parse","localStorage","getItem","myEmail","email","view","setView","q","setQ","mineOnly","setMineOnly","onlySLA","setOnlySLA","loading","setLoading","err","setErr","rows","setRows","active","setActive","token","replace","fetchData","now","Date","query","from","select","order","ascending","limit","eq","t24","getTime","toISOString","lt","not","data","error","e","console","groupByStatus","items","map","Object","fromEntries","c","forEach","i","durum","push","persistOrder","updates","payload","u","_u$atanan_sira","id","kolon_sira","atanan_sira","guncelleme_tarihi","upsert","onConflict","recomputeAssigneeRanks","list","byA","r","atanan_email","values","arr","sort","a","b","_a$atanan_sira","_b$atanan_sira","idx","onDragEnd","result","source","destination","draggableId","statusFrom","droppableId","statusTo","undefined","byStatus","itemIndex","findIndex","String","item","splice","index","col","it","newFlat","flatMap","takeOwnership","myMax","filter","reduce","m","Math","max","myAssigneeMax","update","moveTo","statusKey","markDone","handleLogout","removeItem","filtered","text","baslik","talep_eden_email","toLowerCase","includes","grouped","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","type","checked","to","kullanici","provided","ref","innerRef","droppableProps","slug","length","pp","draggableProps","dragHandleProps","Card","onOpen","onTake","onMove","st","onDone","oncelik","fmtTime","role","Section","aciklama","bitis_tarihi","fmtDate","sla_son_tarih","_c","mine","slaSoon","_c2","_c3","s","replaceAll","ts","toLocaleString","toLocaleDateString","$RefreshReg$"],"sources":["C:/Users/Gorkem.Cadirci/talep-sistemi/src/pages/Inbox.js"],"sourcesContent":["// src/pages/Inbox.js\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\r\nimport supabase from \"../supabaseClient\";\r\nimport \"./Inbox.css\";\r\n\r\nconst STATUS_DISPLAY = {\r\n    Yeni: \"Yeni\",\r\n    Inceleme: \"İnceleme\",\r\n    Atandi: \"Atandı\",\r\n    Calisiliyor: \"Çalışılıyor\",\r\n    Beklemede: \"Beklemede\",\r\n    Tamamlandi: \"Tamamlandı\",\r\n};\r\nconst BOARD_COLUMNS = [\r\n    { key: \"Yeni\", title: \"Yeni\" },\r\n    { key: \"Inceleme\", title: \"İnceleme\" },\r\n    { key: \"Atandi\", title: \"Atandı\" },\r\n    { key: \"Calisiliyor\", title: \"Çalışılıyor\" },\r\n    { key: \"Beklemede\", title: \"Beklemede\" },\r\n    { key: \"Tamamlandi\", title: \"Tamamlandı\" },\r\n];\r\nconst PILL_COLOR = { P1: \"p1\", P2: \"p2\", P3: \"p3\" };\r\n\r\nexport default function InboxModern() {\r\n    const navigate = useNavigate();\r\n    const me = useMemo(() => { try { return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\"); } catch { return {}; } }, []);\r\n    const myEmail = me?.email || \"\";\r\n\r\n    const [view, setView] = useState(\"board\");\r\n    const [q, setQ] = useState(\"\");\r\n    const [mineOnly, setMineOnly] = useState(false);\r\n    const [onlySLA, setOnlySLA] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [err, setErr] = useState(\"\");\r\n    const [rows, setRows] = useState([]);\r\n    const [active, setActive] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"auth_token\");\r\n        if (!token) navigate(\"/login\", { replace: true });\r\n    }, [navigate]);\r\n\r\n    useEffect(() => { fetchData(); /* eslint-disable-next-line */ }, [mineOnly, onlySLA]);\r\n\r\n    async function fetchData() {\r\n        if (!myEmail) return;\r\n        setLoading(true); setErr(\"\");\r\n        try {\r\n            const now = new Date();\r\n            let query = supabase.from(\"talepler\").select(`\r\n        id, baslik, durum, oncelik, talep_eden_email, atanan_email,\r\n        guncelleme_tarihi, bitis_tarihi, sla_son_tarih, aciklama, kolon_sira, atanan_sira\r\n      `).order(\"kolon_sira\", { ascending: true }).order(\"guncelleme_tarihi\", { ascending: false }).limit(500);\r\n\r\n            if (mineOnly) query = query.eq(\"atanan_email\", myEmail);\r\n            if (onlySLA) {\r\n                const t24 = new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString();\r\n                query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", [\"Tamamlandi\", \"Reddedildi\"]);\r\n            }\r\n\r\n            const { data, error } = await query;\r\n            if (error) throw error;\r\n            setRows(data || []);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Kayıtlar çekilemedi.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    // --- DnD helpers\r\n    function groupByStatus(items) {\r\n        const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\r\n        items.forEach(i => { map[i.durum || \"Yeni\"].push(i); });\r\n        // her kolonda kolon_sira değerine göre zaten sıralı geliyor\r\n        return map;\r\n    }\r\n\r\n    async function persistOrder(updates) {\r\n        // updates = [{id, durum, kolon_sira, atanan_sira?}]\r\n        const payload = updates.map(u => ({ id: u.id, durum: u.durum, kolon_sira: u.kolon_sira, atanan_sira: u.atanan_sira ?? null, guncelleme_tarihi: new Date().toISOString() }));\r\n        const { error } = await supabase.from(\"talepler\").upsert(payload, { onConflict: \"id\" });\r\n        if (error) console.error(\"order save error\", error);\r\n    }\r\n\r\n    function recomputeAssigneeRanks(list) {\r\n        // aynı atanan_email için sıraları 1..N ver\r\n        const byA = {};\r\n        list.forEach((r) => {\r\n            if (!r.atanan_email) return;\r\n            if (!byA[r.atanan_email]) byA[r.atanan_email] = [];\r\n            byA[r.atanan_email].push(r);\r\n        });\r\n        Object.values(byA).forEach(arr => {\r\n            arr.sort((a, b) => (a.atanan_sira ?? 1) - (b.atanan_sira ?? 1));\r\n            arr.forEach((r, idx) => { r.atanan_sira = idx + 1; });\r\n        });\r\n    }\r\n\r\n    async function onDragEnd(result) {\r\n        const { source, destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        const statusFrom = source.droppableId;\r\n        const statusTo = destination.droppableId;\r\n        if (statusFrom === undefined || statusTo === undefined) return;\r\n\r\n        // mevcut state’ten çalış\r\n        const byStatus = groupByStatus([...rows]);\r\n        const itemIndex = byStatus[statusFrom].findIndex(i => String(i.id) === String(draggableId));\r\n        if (itemIndex === -1) return;\r\n\r\n        const item = byStatus[statusFrom][itemIndex];\r\n        // kolonlar arasında çıkar/ekle\r\n        byStatus[statusFrom].splice(itemIndex, 1);\r\n        byStatus[statusTo].splice(destination.index, 0, item);\r\n\r\n        // item’in durumunu güncelle\r\n        item.durum = statusTo;\r\n\r\n        // her kolon için kolon_sira’yı yeniden ata (1..N)\r\n        BOARD_COLUMNS.forEach(col => {\r\n            byStatus[col.key].forEach((it, idx) => { it.kolon_sira = idx + 1; });\r\n        });\r\n\r\n        // atanan sıralarını da güncelle (kullanıcı kuyrukları)\r\n        const newFlat = BOARD_COLUMNS.flatMap(c => byStatus[c.key]);\r\n        recomputeAssigneeRanks(newFlat);\r\n\r\n        // optimistic update\r\n        setRows(newFlat);\r\n\r\n        // db’ye yaz\r\n        const updates = newFlat.map(({ id, durum, kolon_sira, atanan_sira }) => ({ id, durum, kolon_sira, atanan_sira }));\r\n        await persistOrder(updates);\r\n    }\r\n\r\n    // --- quick actions\r\n    async function takeOwnership(id) {\r\n        if (!myEmail) return;\r\n        // benim kolonumdaki en alta yerleştir\r\n        const myMax = rows.filter(r => r.durum === \"Inceleme\").reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\r\n        const myAssigneeMax = rows.filter(r => r.atanan_email === myEmail).reduce((m, r) => Math.max(m, r.atanan_sira || 0), 0) + 1;\r\n\r\n        const { error } = await supabase.from(\"talepler\").update({\r\n            atanan_email: myEmail, durum: \"Inceleme\",\r\n            kolon_sira: myMax, atanan_sira: myAssigneeMax,\r\n            guncelleme_tarihi: new Date().toISOString()\r\n        }).eq(\"id\", id);\r\n        if (!error) fetchData();\r\n    }\r\n\r\n    async function moveTo(id, statusKey) {\r\n        // gittiği kolonun en altına koy\r\n        const max = rows.filter(r => r.durum === statusKey).reduce((m, r) => Math.max(m, r.kolon_sira || 0), 0) + 1;\r\n        const { error } = await supabase.from(\"talepler\").update({\r\n            durum: statusKey, kolon_sira: max, guncelleme_tarihi: new Date().toISOString()\r\n        }).eq(\"id\", id);\r\n        if (!error) fetchData();\r\n    }\r\n\r\n    async function markDone(id) {\r\n        await moveTo(id, \"Tamamlandi\");\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(\"auth_token\");\r\n        localStorage.removeItem(\"user_profile\");\r\n        navigate(\"/login\", { replace: true });\r\n    }\r\n\r\n    // filtre\r\n    const filtered = rows.filter(r => {\r\n        if (!q) return true;\r\n        const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"}`.toLowerCase();\r\n        return text.includes(q.toLowerCase());\r\n    });\r\n\r\n    // board groups\r\n    const grouped = groupByStatus(filtered);\r\n\r\n    return (\r\n        <div className=\"mx\">\r\n            {/* Command bar */}\r\n            <div className=\"mx-top\">\r\n                <div className=\"brand\">\r\n                    <div className=\"logo\">🧭</div>\r\n                    <div className=\"bt\">\r\n                        <h1>Gelen Kutusu</h1>\r\n                        <span className=\"muted\">İş & Süreç Geliştirme</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"cmd\">\r\n                    <div className=\"seg\">\r\n                        <button className={`seg-btn ${view === \"board\" ? \"on\" : \"\"}`} onClick={() => setView(\"board\")}>Kanban</button>\r\n                        <button className={`seg-btn ${view === \"list\" ? \"on\" : \"\"}`} onClick={() => setView(\"list\")}>Liste</button>\r\n                    </div>\r\n\r\n                    <div className=\"search-wrap\">\r\n                        <input className=\"search\" placeholder=\"Ara: #id, başlık, kişi…\" value={q} onChange={(e) => setQ(e.target.value)} />\r\n                    </div>\r\n\r\n                    <div className=\"toggles\">\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={mineOnly} onChange={e => setMineOnly(e.target.checked)} />\r\n                            <span>Bana atananlar</span>\r\n                        </label>\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={onlySLA} onChange={e => setOnlySLA(e.target.checked)} />\r\n                            <span>SLA (&lt;24s)</span>\r\n                        </label>\r\n                    </div>\r\n\r\n                    <Link to=\"/newrequest\" className=\"btn primary\">+ Yeni Talep</Link>\r\n                    <div className=\"chip\">{me?.kullanici || me?.email}</div>\r\n                    <button className=\"btn danger\" onClick={handleLogout}>Çıkış</button>\r\n                </div>\r\n            </div>\r\n\r\n            {err && <div className=\"mx-alert err\">{err}</div>}\r\n\r\n            {loading ? (\r\n                <div className=\"mx-skel\">Yükleniyor…</div>\r\n            ) : view === \"board\" ? (\r\n                <DragDropContext onDragEnd={onDragEnd}>\r\n                    <div className=\"board\">\r\n                        {BOARD_COLUMNS.map(col => {\r\n                            const items = grouped[col.key] || [];\r\n                            return (\r\n                                <Droppable droppableId={col.key} key={col.key}>\r\n                                    {(provided) => (\r\n                                        <div className=\"col\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                            <div className=\"col-head\">\r\n                                                <span className={`dot s-${slug(col.title)}`}></span>\r\n                                                <h3>{col.title}</h3>\r\n                                                <span className=\"count\">{items.length}</span>\r\n                                            </div>\r\n                                            <div className=\"col-body\">\r\n                                                {items.length === 0 && <div className=\"col-empty\">Henüz kayıt yok</div>}\r\n                                                {items.map((item, index) => (\r\n                                                    <Draggable draggableId={String(item.id)} index={index} key={item.id}>\r\n                                                        {(pp) => (\r\n                                                            <div ref={pp.innerRef} {...pp.draggableProps} {...pp.dragHandleProps}>\r\n                                                                <Card\r\n                                                                    data={item}\r\n                                                                    onOpen={() => setActive(item)}\r\n                                                                    onTake={() => takeOwnership(item.id)}\r\n                                                                    onMove={(st) => moveTo(item.id, st)}\r\n                                                                    onDone={() => markDone(item.id)}\r\n                                                                    me={myEmail}\r\n                                                                />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </Draggable>\r\n                                                ))}\r\n                                                {provided.placeholder}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </DragDropContext>\r\n            ) : (\r\n                <div className=\"listv\">\r\n                    {filtered.length === 0 && <div className=\"col-empty\">Kayıt bulunamadı</div>}\r\n                    {filtered.map(r => (\r\n                        <div key={r.id} className=\"rowv\" onClick={() => setActive(r)}>\r\n                            <span className={`pill ${PILL_COLOR[r.oncelik] || \"p3\"}`}>{r.oncelik || \"P3\"}</span>\r\n                            <span className={`badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[r.durum] || \"Yeni\"}</span>\r\n                            <span className=\"r-title\">#{r.id} — {r.baslik}</span>\r\n                            <span className=\"r-sub\">{r.talep_eden_email} → {r.atanan_email || \"—\"}</span>\r\n                            <span className=\"r-time\">{fmtTime(r.guncelleme_tarihi)}</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Detay çekmecesi */}\r\n            {active && (\r\n                <div className=\"drawer\" role=\"dialog\" aria-modal=\"true\">\r\n                    <div className=\"drawer-panel\">\r\n                        <button className=\"drawer-close\" onClick={() => setActive(null)}>×</button>\r\n\r\n                        <div className=\"drawer-top\">\r\n                            <span className={`pill ${PILL_COLOR[active.oncelik] || \"p3\"}`}>{active.oncelik || \"P3\"}</span>\r\n                            <span className={`badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[active.durum] || \"Yeni\"}</span>\r\n                            <h2>#{active.id} — {active.baslik}</h2>\r\n                            <div className=\"d-sub\">\r\n                                <span>İsteyen: <b>{active.talep_eden_email}</b></span>\r\n                                <span> · </span>\r\n                                <span>Atanan: <b>{active.atanan_email || \"—\"}</b></span>\r\n                                <span> · </span>\r\n                                <span>Güncellendi: {fmtTime(active.guncelleme_tarihi)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"drawer-body\">\r\n                            <Section title=\"Açıklama\">\r\n                                <p className=\"desc\">{active.aciklama || \"Açıklama girilmemiş.\"}</p>\r\n                            </Section>\r\n\r\n                            <Section title=\"Hızlı İşlemler\">\r\n                                <div className=\"act-grid\">\r\n                                    {!active.atanan_email && (\r\n                                        <button className=\"btn ghost\" onClick={() => { setActive(null); takeOwnership(active.id); }}>Üstlen</button>\r\n                                    )}\r\n                                    <button className=\"btn ghost\" onClick={() => { setActive(null); moveTo(active.id, \"Inceleme\"); }}>İnceleme</button>\r\n                                    <button className=\"btn ghost\" onClick={() => { setActive(null); moveTo(active.id, \"Calisiliyor\"); }}>Çalışılıyor</button>\r\n                                    <button className=\"btn ghost\" onClick={() => { setActive(null); moveTo(active.id, \"Beklemede\"); }}>Beklemede</button>\r\n                                    <button className=\"btn primary\" onClick={() => { setActive(null); markDone(active.id); }}>✓ Tamamlandı</button>\r\n                                </div>\r\n                            </Section>\r\n\r\n                            <Section title=\"Zaman\">\r\n                                <div className=\"kv\">\r\n                                    <div><span>Hedef Tarih:</span><b>{active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"}</b></div>\r\n                                    <div><span>SLA Son:</span><b>{active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"}</b></div>\r\n                                </div>\r\n                            </Section>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"drawer-backdrop\" onClick={() => setActive(null)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/* components */\r\nfunction Card({ data, onOpen, onTake, onMove, onDone, me }) {\r\n    const mine = data.atanan_email && data.atanan_email === me;\r\n    const slaSoon = data.sla_son_tarih && new Date(data.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000;\r\n\r\n    return (\r\n        <div className={`card ${mine ? \"mine\" : \"\"}`}>\r\n            <div className=\"c-top\">\r\n                <span className={`pill ${PILL_COLOR[data.oncelik] || \"p3\"}`}>{data.oncelik || \"P3\"}</span>\r\n                <span className={`badge s-${slug(STATUS_DISPLAY[data.durum] || \"Yeni\")}`}>{STATUS_DISPLAY[data.durum] || \"Yeni\"}</span>\r\n                {slaSoon && <span className=\"sla\">SLA</span>}\r\n                <button className=\"icn\" onClick={onOpen} title=\"Detay\">⋯</button>\r\n            </div>\r\n\r\n            <div className=\"c-title\">#{data.id} — {data.baslik}</div>\r\n            <div className=\"c-sub\">\r\n                <span>{data.talep_eden_email}</span>\r\n                <span>→</span>\r\n                <span>{data.atanan_email || \"—\"}</span>\r\n            </div>\r\n\r\n            <div className=\"c-foot\">\r\n                <span className=\"time\">{fmtTime(data.guncelleme_tarihi)}</span>\r\n                <div className=\"act\">\r\n                    {!data.atanan_email && <button className=\"btn ghost xs\" onClick={onTake}>Üstlen</button>}\r\n                    <button className=\"btn ghost xs\" onClick={() => onMove(\"Inceleme\")}>İnceleme</button>\r\n                    <button className=\"btn ghost xs\" onClick={() => onMove(\"Calisiliyor\")}>Çalışılıyor</button>\r\n                    <button className=\"btn primary xs\" onClick={onDone}>Tamamla</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Section({ title, children }) {\r\n    return (\r\n        <section className=\"sec\">\r\n            <div className=\"sec-h\"><h4>{title}</h4></div>\r\n            <div className=\"sec-b\">{children}</div>\r\n        </section>\r\n    );\r\n}\r\n\r\n/* utils */\r\nfunction slug(s) { return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\"); }\r\nfunction fmtTime(ts) { try { return new Date(ts).toLocaleString(); } catch { return \"—\"; } }\r\nfunction fmtDate(ts) { try { return new Date(ts).toLocaleDateString(); } catch { return \"—\"; } }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}