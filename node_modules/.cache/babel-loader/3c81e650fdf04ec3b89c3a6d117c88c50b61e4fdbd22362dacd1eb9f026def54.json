{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gorkem.Cadirci\\\\talep-sistemi\\\\src\\\\pages\\\\Inbox.js\",\n  _s = $RefreshSig$();\n// src/pages/Inbox.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\nimport supabase from \"../supabaseClient\";\nimport \"./Inbox.css\";\n\n/* ---- DURUM KODLARI (DB ile birebir) ---- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS = {\n  Yeni: \"Yeni\",\n  SirayaAlindi: \"SirayaAlindi\",\n  IslemeAlindi: \"IslemeAlindi\",\n  TestEdiliyor: \"TestEdiliyor\",\n  Tamamlandi: \"Tamamlandi\"\n};\nconst STATUS_DISPLAY = {\n  [STATUS.Yeni]: \"Yeni\",\n  [STATUS.SirayaAlindi]: \"Sıraya Alındı\",\n  [STATUS.IslemeAlindi]: \"İşleme Alındı\",\n  [STATUS.TestEdiliyor]: \"Test Ediliyor\",\n  [STATUS.Tamamlandi]: \"Tamamlandı\"\n};\nconst BOARD_COLUMNS = [{\n  key: STATUS.Yeni,\n  title: STATUS_DISPLAY[STATUS.Yeni]\n}, {\n  key: STATUS.SirayaAlindi,\n  title: STATUS_DISPLAY[STATUS.SirayaAlindi]\n}, {\n  key: STATUS.IslemeAlindi,\n  title: STATUS_DISPLAY[STATUS.IslemeAlindi]\n}, {\n  key: STATUS.TestEdiliyor,\n  title: STATUS_DISPLAY[STATUS.TestEdiliyor]\n}, {\n  key: STATUS.Tamamlandi,\n  title: STATUS_DISPLAY[STATUS.Tamamlandi]\n}];\nconst PILL_COLOR = {\n  P1: \"p1\",\n  P2: \"p2\",\n  P3: \"p3\"\n};\n\n/* ---- Tek kayıt sıralama: araya yerleştir (lokal) ---- */\nconst GAP = 1000;\nfunction between(prev, next) {\n  const hasPrev = Number.isFinite(prev);\n  const hasNext = Number.isFinite(next);\n  if (hasPrev && hasNext) return (prev + next) / 2;\n  if (hasPrev && !hasNext) return prev + GAP;\n  if (!hasPrev && hasNext) return next - GAP;\n  return GAP;\n}\nexport default function InboxModern() {\n  _s();\n  const navigate = useNavigate();\n  const me = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\");\n    } catch {\n      return {};\n    }\n  }, []);\n  const myEmail = (me === null || me === void 0 ? void 0 : me.email) || \"\";\n  const myName = ((me === null || me === void 0 ? void 0 : me.kullanici) || \"\").trim();\n  const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\n  const [q, setQ] = useState(\"\");\n  const [onlySLA, setOnlySLA] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [dirty, setDirty] = useState(false); // Liste'de değişiklik var mı?\n  const [msg, setMsg] = useState(\"\"); // bilgi mesajı\n  const [err, setErr] = useState(\"\");\n  const [rows, setRows] = useState([]);\n  const [active, setActive] = useState(null);\n\n  // Drawer içindeki form state'leri\n  const [descDraft, setDescDraft] = useState(\"\");\n  const [noteDraft, setNoteDraft] = useState(\"\");\n  const [drawerSaving, setDrawerSaving] = useState(false);\n\n  // guard\n  useEffect(() => {\n    if (!localStorage.getItem(\"auth_token\")) navigate(\"/login\", {\n      replace: true\n    });\n  }, [navigate]);\n\n  // data\n  useEffect(() => {\n    fetchData();\n    setDirty(false);\n    setMsg(\"\");\n    // eslint-disable-next-line\n  }, [onlySLA, view]);\n\n  // realtime\n  useEffect(() => {\n    const channel = supabase.channel(\"talepler-realtime\").on(\"postgres_changes\", {\n      event: \"*\",\n      schema: \"public\",\n      table: \"talepler\"\n    }, payload => setRows(prev => applyRealtime(prev, payload))).subscribe();\n    return () => supabase.removeChannel(channel);\n  }, []);\n\n  // görünüm değişince sırala\n  useEffect(() => {\n    setRows(prev => sortRows(prev, view));\n  }, [view]);\n\n  // aktif kayıt değişince drawer form alanlarını doldur\n  useEffect(() => {\n    if (active) {\n      var _active$aciklama, _active$kullanici_not;\n      setDescDraft((_active$aciklama = active.aciklama) !== null && _active$aciklama !== void 0 ? _active$aciklama : \"\");\n      setNoteDraft((_active$kullanici_not = active.kullanici_notu) !== null && _active$kullanici_not !== void 0 ? _active$kullanici_not : \"\");\n    } else {\n      setDescDraft(\"\");\n      setNoteDraft(\"\");\n    }\n  }, [active]);\n  async function fetchData() {\n    if (!myEmail) return;\n    setLoading(true);\n    setErr(\"\");\n    try {\n      // SADECE bana atanan kayıtlar\n      let query = supabase.from(\"talepler\").select(\"*\").eq(\"atanan_email\", myEmail);\n\n      // Sıralama: Liste görünümünde kişisel sıra, Kanban'da kolon_sira\n      if (view === \"list\") {\n        query = query.order(\"atanan_sira\", {\n          ascending: true,\n          nullsFirst: false\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      } else {\n        query = query.order(\"kolon_sira\", {\n          ascending: true,\n          nullsFirst: true\n        }).order(\"guncelleme_tarihi\", {\n          ascending: false\n        });\n      }\n      if (onlySLA) {\n        const t24 = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();\n        query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", '(\"Tamamlandi\",\"Reddedildi\")');\n      }\n      const {\n        data,\n        error\n      } = await query.limit(500);\n      if (error) throw error;\n      setRows(sortRows(data || [], view));\n    } catch (e) {\n      console.error(e);\n      setErr(\"Kayıtlar çekilemedi.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  /* ---------- helpers ---------- */\n  function groupByStatus(items) {\n    const map = Object.fromEntries(BOARD_COLUMNS.map(c => [c.key, []]));\n    items.forEach(i => {\n      (map[i.durum || STATUS.Yeni] ??= []).push(i);\n    });\n    for (const k of Object.keys(map)) {\n      map[k].sort((a, b) => {\n        var _a$kolon_sira, _b$kolon_sira;\n        return ((_a$kolon_sira = a.kolon_sira) !== null && _a$kolon_sira !== void 0 ? _a$kolon_sira : 1e15) - ((_b$kolon_sira = b.kolon_sira) !== null && _b$kolon_sira !== void 0 ? _b$kolon_sira : 1e15);\n      });\n    }\n    return map;\n  }\n  async function updateRow(id, changes) {\n    setSaving(true);\n    const {\n      error\n    } = await supabase.from(\"talepler\").update({\n      ...changes,\n      guncelleme_tarihi: new Date().toISOString()\n    }).eq(\"id\", id).eq(\"atanan_email\", myEmail); // güvenlik\n    setSaving(false);\n    if (error) {\n      console.error(\"updateRow error\", error);\n      setErr(error.message || \"Güncelleme başarısız.\");\n      fetchData();\n      return false;\n    }\n    return true;\n  }\n\n  /* ---------- DnD: Kanban (tek kayıt — anında kaydet) ---------- */\n  async function onBoardDragEnd(result) {\n    var _dstArr, _dstArr2;\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    const byStatus = groupByStatus([...rows]);\n    const srcArr = byStatus[source.droppableId];\n    const dstArr = byStatus[destination.droppableId];\n    const idx = srcArr.findIndex(i => String(i.id) === String(draggableId));\n    if (idx === -1) return;\n    const item = srcArr[idx];\n    if (item.atanan_email !== myEmail) {\n      setErr(\"Bu kart size ait değil.\");\n      return;\n    }\n\n    // UI\n    srcArr.splice(idx, 1);\n    const destIndex = destination.index;\n    dstArr.splice(destIndex, 0, item);\n    const prev = (_dstArr = dstArr[destIndex - 1]) === null || _dstArr === void 0 ? void 0 : _dstArr.kolon_sira;\n    const next = (_dstArr2 = dstArr[destIndex + 1]) === null || _dstArr2 === void 0 ? void 0 : _dstArr2.kolon_sira;\n    const newKolonSira = between(prev, next);\n    const newDurum = destination.droppableId;\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === item.id ? {\n      ...r,\n      durum: newDurum,\n      kolon_sira: newKolonSira\n    } : r), view));\n    await updateRow(item.id, {\n      durum: newDurum,\n      kolon_sira: newKolonSira\n    });\n  }\n\n  /* ---------- DnD: Liste (tek kayıt — LOKAL değiştir, sonra \"Kaydet\") ---------- */\n  async function onListDragEnd(result) {\n    const {\n      destination,\n      draggableId\n    } = result;\n    if (!destination) return;\n    const listMine = filtered;\n    const from = listMine.findIndex(i => String(i.id) === String(draggableId));\n    if (from === -1) return;\n    const moved = listMine[from];\n    listMine.splice(from, 1);\n    const to = destination.index;\n    listMine.splice(to, 0, moved);\n    setRows(prevRows => {\n      const orderMap = new Map(listMine.map((r, i) => [r.id, i + 1]));\n      const nextRows = prevRows.map(r => orderMap.has(r.id) ? {\n        ...r,\n        atanan_sira: orderMap.get(r.id)\n      } : r);\n      return sortRows(nextRows, view);\n    });\n    setDirty(true);\n    setMsg(\"Kişisel kuyruğunda kaydedilmemiş değişiklikler var.\");\n  }\n\n  /* ---------- \"Sırayı Kaydet\" (kişisel) ---------- */\n  async function saveOrder() {\n    if (view !== \"list\") return;\n    try {\n      setSaving(true);\n      setErr(\"\");\n      setMsg(\"\");\n      const ids = filtered.map(r => Number(r.id));\n      if (ids.length === 0) return;\n      const {\n        error\n      } = await supabase.rpc(\"set_assignee_order\", {\n        p_email: myEmail,\n        p_ids: ids\n      });\n      if (error) {\n        // Fallback: 1..N olarak atanan_sira yaz\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          const {\n            error: upErr\n          } = await supabase.from(\"talepler\").update({\n            atanan_sira: i + 1,\n            guncelleme_tarihi: new Date().toISOString()\n          }).eq(\"id\", id).eq(\"atanan_email\", myEmail);\n          if (upErr) throw upErr;\n        }\n      }\n      setMsg(\"Kişisel sıra kaydedildi.\");\n      setDirty(false);\n      await fetchData();\n    } catch (e) {\n      console.error(e);\n      setErr(\"Sıralama kaydedilemedi.\");\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  /* ---------- hızlı işlemler (anında kaydet) ---------- */\n  async function moveTo(id, statusKey) {\n    var _dst;\n    const row = rows.find(r => r.id === id);\n    if (!row || row.atanan_email !== myEmail) {\n      setErr(\"Bu kayıt size ait değil.\");\n      return;\n    }\n    const byStatus = groupByStatus(rows);\n    const dst = byStatus[statusKey];\n    const last = (_dst = dst[dst.length - 1]) === null || _dst === void 0 ? void 0 : _dst.kolon_sira;\n    const newKolonSira = between(last, undefined);\n    setRows(prevRows => sortRows(prevRows.map(r => r.id === id ? {\n      ...r,\n      durum: statusKey,\n      kolon_sira: newKolonSira\n    } : r), view));\n    await updateRow(id, {\n      durum: statusKey,\n      kolon_sira: newKolonSira\n    });\n  }\n  async function markDone(id) {\n    await moveTo(id, STATUS.Tamamlandi);\n  }\n  function handleLogout() {\n    localStorage.removeItem(\"auth_token\");\n    localStorage.removeItem(\"user_profile\");\n    navigate(\"/login\", {\n      replace: true\n    });\n  }\n\n  /* ---------- filter ---------- */\n  const filtered = rows.filter(r => {\n    if (!q) return true;\n    const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"} ${r.talep_eden_kullanici || \"\"} ${r.atanan_kullanici || \"\"}`.toLowerCase();\n    return text.includes(q.toLowerCase());\n  });\n  const grouped = groupByStatus(filtered);\n\n  // Drawer kaydet\n  async function saveDrawerFields() {\n    if (!active) return;\n    if (active.atanan_email !== myEmail) {\n      setErr(\"Bu kayıt size ait değil.\");\n      return;\n    }\n    try {\n      var _active$aciklama2, _active$kullanici_not2;\n      setDrawerSaving(true);\n      const changes = {};\n      if (descDraft !== ((_active$aciklama2 = active.aciklama) !== null && _active$aciklama2 !== void 0 ? _active$aciklama2 : \"\")) changes.aciklama = descDraft.trim() || null;\n      if (noteDraft !== ((_active$kullanici_not2 = active.kullanici_notu) !== null && _active$kullanici_not2 !== void 0 ? _active$kullanici_not2 : \"\")) changes.kullanici_notu = noteDraft.trim() || null;\n      if (Object.keys(changes).length === 0) {\n        setMsg(\"Değişiklik yok.\");\n        return;\n      }\n      const ok = await updateRow(active.id, changes);\n      if (ok) {\n        // Lokal state'i güncelle\n        const nowIso = new Date().toISOString();\n        setRows(prev => prev.map(r => r.id === active.id ? {\n          ...r,\n          ...changes,\n          guncelleme_tarihi: nowIso\n        } : r));\n        setActive(prev => prev ? {\n          ...prev,\n          ...changes,\n          guncelleme_tarihi: nowIso\n        } : prev);\n        setMsg(\"Kaydedildi.\");\n      }\n    } catch (e) {\n      console.error(e);\n      setErr(\"Değişiklikler kaydedilemedi.\");\n    } finally {\n      setDrawerSaving(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: \"\\uD83E\\uDDED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bt\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Gelen Kutusu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"muted\",\n            children: \"Sadece size atanan i\\u015Fler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cmd\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seg\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"board\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"board\"),\n            children: \"Kanban\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `seg-btn ${view === \"list\" ? \"on\" : \"\"}`,\n            onClick: () => setView(\"list\"),\n            children: \"Liste\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"search\",\n            placeholder: \"Ara: #id, ba\\u015Fl\\u0131k, ki\\u015Fi\\u2026\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toggles\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: onlySLA,\n              onChange: e => setOnlySLA(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"SLA (<24s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 21\n        }, this), view === \"list\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${dirty ? \"primary\" : \"ghost\"}`,\n          onClick: saveOrder,\n          disabled: !dirty || saving,\n          title: \"Ki\\u015Fisel s\\u0131ran\\u0131 kaydet\",\n          children: \"S\\u0131ram\\u0131 Kaydet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/newrequest\",\n          className: \"btn primary\",\n          children: \"+ Yeni Talep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chip\",\n          children: (me === null || me === void 0 ? void 0 : me.kullanici) || (me === null || me === void 0 ? void 0 : me.email) || \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn danger\",\n          onClick: handleLogout,\n          children: \"\\xC7\\u0131k\\u0131\\u015F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 21\n        }, this), saving && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"saving-ind\",\n          children: \"Kaydediliyor\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-alert err\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 21\n    }, this), msg && !err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-alert ok\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 29\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-skel\",\n      children: \"Y\\xFCkleniyor\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 17\n    }, this) : view === \"board\" ? /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onBoardDragEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: BOARD_COLUMNS.map(col => {\n          const items = grouped[col.key] || [];\n          return /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: col.key,\n            children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              ref: provided.innerRef,\n              ...provided.droppableProps,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-head\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `dot s-${slug(col.title)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: col.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"count\",\n                  children: items.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-body\",\n                children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-empty\",\n                  children: \"Hen\\xFCz kay\\u0131t yok\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 72\n                }, this), items.map((item, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                  draggableId: String(item.id),\n                  index: index,\n                  isDragDisabled: item.atanan_email !== myEmail,\n                  children: pp => /*#__PURE__*/_jsxDEV(\"div\", {\n                    ref: pp.innerRef,\n                    ...pp.draggableProps,\n                    ...pp.dragHandleProps,\n                    children: /*#__PURE__*/_jsxDEV(Card, {\n                      data: item,\n                      onOpen: () => setActive(item),\n                      me: myEmail\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 65\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 61\n                  }, this)\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 53\n                }, this)), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 41\n            }, this)\n          }, col.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onListDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: \"listMine\",\n        children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listv\",\n          ref: provided.innerRef,\n          ...provided.droppableProps,\n          children: [filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-empty\",\n            children: \"Kay\\u0131t bulunamad\\u0131\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 59\n          }, this), filtered.map((r, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: String(r.id),\n            index: index,\n            children: pp => {\n              var _r$atanan_sira, _r$atanan_sira2;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: pp.innerRef,\n                ...pp.draggableProps,\n                ...pp.dragHandleProps,\n                className: \"rowv\",\n                onClick: () => setActive(r),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-idx\",\n                  style: {\n                    minWidth: 24,\n                    textAlign: \"right\",\n                    opacity: 0.7,\n                    marginRight: 8\n                  },\n                  children: (_r$atanan_sira = r.atanan_sira) !== null && _r$atanan_sira !== void 0 ? _r$atanan_sira : index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `pill ${PILL_COLOR[r.oncelik] || \"p3\"}`,\n                  children: r.oncelik || \"P3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`,\n                  children: STATUS_DISPLAY[r.durum] || \"Yeni\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-title\",\n                  children: [\"#\", r.id, \" \\u2014 \", r.baslik]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-sub\",\n                  children: [r.talep_eden_kullanici || r.talep_eden_email || \"—\", \" \\u2192 \", r.atanan_kullanici || r.atanan_email || \"—\", /*#__PURE__*/_jsxDEV(\"b\", {\n                    style: {\n                      marginLeft: 8,\n                      opacity: 0.8\n                    },\n                    children: [\"(S\\u0131ra: \", (_r$atanan_sira2 = r.atanan_sira) !== null && _r$atanan_sira2 !== void 0 ? _r$atanan_sira2 : \"—\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"r-time\",\n                  children: fmtTime(r.guncelleme_tarihi)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 45\n              }, this);\n            }\n          }, r.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 37\n          }, this)), provided.placeholder, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hint\",\n            style: {\n              padding: 8,\n              opacity: 0.7\n            },\n            children: dirty ? \"Kaydet'e basarak kişisel sıralamayı kalıcı hale getir.\" : \"Bu listede sürüklediğin sıra sadece senin kuyruğunu etkiler (Kaydet ile).\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 17\n    }, this), active && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drawer\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-backdrop\",\n        onClick: () => setActive(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drawer-panel\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"drawer-close\",\n          onClick: () => setActive(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `pill ${PILL_COLOR[active.oncelik] || \"p3\"}`,\n            children: active.oncelik || \"P3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`,\n            children: STATUS_DISPLAY[active.durum] || \"Yeni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 29\n          }, this), active.sla_son_tarih && new Date(active.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sla\",\n            children: \"SLA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"#\", active.id, \" \\u2014 \", active.baslik]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-sub\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u0130steyen: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.talep_eden_kullanici || active.talep_eden_email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 46\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Atanan: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: active.atanan_kullanici || active.atanan_email || \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" \\xB7 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"G\\xFCncellendi: \", fmtTime(active.guncelleme_tarihi)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drawer-body\",\n          children: [/*#__PURE__*/_jsxDEV(Section, {\n            title: \"A\\xE7\\u0131klama (d\\xFCzenlenebilir)\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"input texta\",\n              value: descDraft,\n              onChange: e => setDescDraft(e.target.value),\n              placeholder: \"Talebin a\\xE7\\u0131klamas\\u0131\\u2026\",\n              rows: 5\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"act-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                onClick: saveDrawerFields,\n                disabled: drawerSaving,\n                title: \"A\\xE7\\u0131klama ve ki\\u015Fisel notu kaydet\",\n                children: \"Kaydet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  var _active$aciklama3, _active$kullanici_not3;\n                  setDescDraft((_active$aciklama3 = active.aciklama) !== null && _active$aciklama3 !== void 0 ? _active$aciklama3 : \"\");\n                  setNoteDraft((_active$kullanici_not3 = active.kullanici_notu) !== null && _active$kullanici_not3 !== void 0 ? _active$kullanici_not3 : \"\");\n                },\n                disabled: drawerSaving,\n                children: \"Geri Al\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 37\n              }, this), drawerSaving && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"saving-ind\",\n                style: {\n                  marginLeft: 8\n                },\n                children: \"Kaydediliyor\\u2026\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 54\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Ki\\u015Fisel Notum\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"input texta\",\n              value: noteDraft,\n              onChange: e => setNoteDraft(e.target.value),\n              placeholder: \"Bu talep hakk\\u0131nda kendine not b\\u0131rak\\u2026 (yaln\\u0131zca sen g\\xF6r\\xFCrs\\xFCn)\",\n              rows: 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted\",\n              style: {\n                marginTop: 6\n              },\n              children: [\"Bu alan \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"kullanici_notu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 45\n              }, this), \" s\\xFCtununda saklan\\u0131r ve yaln\\u0131zca bu i\\u015Fi \\xFCstlenen kullan\\u0131c\\u0131 i\\xE7in anlaml\\u0131d\\u0131r.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"H\\u0131zl\\u0131 \\u0130\\u015Flemler\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"act-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.SirayaAlindi);\n                  }\n                },\n                disabled: active.atanan_email !== myEmail,\n                children: \"S\\u0131raya al\\u0131nd\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.IslemeAlindi);\n                  }\n                },\n                disabled: active.atanan_email !== myEmail,\n                children: \"\\u0130\\u015Fleme al\\u0131nd\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => {\n                  if (active.atanan_email === myEmail) {\n                    setActive(null);\n                    moveTo(active.id, STATUS.TestEdiliyor);\n                  }\n                },\n                disabled: active.atanan_email !== myEmail,\n                children: \"Test ediliyor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                onClick: () => {\n                  if (active.atanan_email === myEmail) {\n                    setActive(null);\n                    markDone(active.id);\n                  }\n                },\n                disabled: active.atanan_email !== myEmail,\n                children: \"\\u2713 Tamamland\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            title: \"Zaman\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"kv\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hedef Tarih:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 644,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"SLA Son:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 648,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 9\n  }, this);\n}\n\n/* components */\n_s(InboxModern, \"0Tqk+mR9AAaKgDqezGFdDNUGaEw=\", false, function () {\n  return [useNavigate];\n});\n_c = InboxModern;\nfunction Card({\n  data,\n  onOpen,\n  me\n}) {\n  const mine = data.atanan_email && data.atanan_email === me;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `card ${mine ? \"mine\" : \"\"}`,\n    onClick: onOpen,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-title\",\n      children: [\"#\", data.id, \" \\u2014 \", data.baslik]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-desc\",\n      children: data.aciklama || \"—\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 665,\n    columnNumber: 9\n  }, this);\n}\n_c2 = Card;\nfunction Section({\n  title,\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sec\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-h\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sec-b\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 676,\n    columnNumber: 9\n  }, this);\n}\n\n/* utils */\n_c3 = Section;\nfunction slug(s) {\n  return (s || \"\").toLowerCase().replaceAll(\"ı\", \"i\").replaceAll(\"ğ\", \"g\").replaceAll(\"ş\", \"s\").replaceAll(\"ö\", \"o\").replaceAll(\"ç\", \"c\").replaceAll(\"ü\", \"u\").replace(/\\s+/g, \"-\");\n}\nfunction fmtTime(ts) {\n  try {\n    return new Date(ts).toLocaleString();\n  } catch {\n    return \"—\";\n  }\n}\nfunction fmtDate(ts) {\n  try {\n    return new Date(ts).toLocaleDateString();\n  } catch {\n    return \"—\";\n  }\n}\n\n/* ------ realtime yardımcıları ------ */\nfunction dateNum(v) {\n  try {\n    return new Date(v).getTime() || 0;\n  } catch {\n    return 0;\n  }\n}\nfunction sortRows(list, view) {\n  const a = [...(list || [])];\n  if (view === \"list\") {\n    a.sort((x, y) => {\n      var _x$atanan_sira, _y$atanan_sira, _x$id, _y$id;\n      const ax = (_x$atanan_sira = x.atanan_sira) !== null && _x$atanan_sira !== void 0 ? _x$atanan_sira : 1e15;\n      const ay = (_y$atanan_sira = y.atanan_sira) !== null && _y$atanan_sira !== void 0 ? _y$atanan_sira : 1e15;\n      if (ax !== ay) return ax - ay;\n      const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\n      if (tx !== 0) return tx;\n      return ((_x$id = x.id) !== null && _x$id !== void 0 ? _x$id : 0) - ((_y$id = y.id) !== null && _y$id !== void 0 ? _y$id : 0);\n    });\n  } else {\n    a.sort((x, y) => {\n      var _x$kolon_sira, _y$kolon_sira, _x$id2, _y$id2;\n      const kx = (_x$kolon_sira = x.kolon_sira) !== null && _x$kolon_sira !== void 0 ? _x$kolon_sira : 1e15;\n      const ky = (_y$kolon_sira = y.kolon_sira) !== null && _y$kolon_sira !== void 0 ? _y$kolon_sira : 1e15;\n      if (kx !== ky) return kx - ky;\n      const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\n      if (tx !== 0) return tx;\n      return ((_x$id2 = x.id) !== null && _x$id2 !== void 0 ? _x$id2 : 0) - ((_y$id2 = y.id) !== null && _y$id2 !== void 0 ? _y$id2 : 0);\n    });\n  }\n  return a;\n}\nfunction applyRealtime(prev, payload) {\n  const type = payload.eventType;\n  const next = [...prev];\n  if (type === \"DELETE\") {\n    return next.filter(r => {\n      var _payload$old;\n      return r.id !== ((_payload$old = payload.old) === null || _payload$old === void 0 ? void 0 : _payload$old.id);\n    });\n  }\n  const row = payload.new;\n  // Bana ait değilse listeye sokma\n  if (row !== null && row !== void 0 && row.atanan_email && prev.length > 0) {\n    var _prev$;\n    const myEmail = (_prev$ = prev[0]) === null || _prev$ === void 0 ? void 0 : _prev$.atanan_email;\n    if (row.atanan_email !== myEmail) return prev;\n  }\n  const i = next.findIndex(r => r.id === row.id);\n  if (i === -1) next.push(row);else next[i] = {\n    ...next[i],\n    ...row\n  };\n  return sortRows(next, \"board\");\n}\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"InboxModern\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Section\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","Link","DragDropContext","Droppable","Draggable","supabase","jsxDEV","_jsxDEV","STATUS","Yeni","SirayaAlindi","IslemeAlindi","TestEdiliyor","Tamamlandi","STATUS_DISPLAY","BOARD_COLUMNS","key","title","PILL_COLOR","P1","P2","P3","GAP","between","prev","next","hasPrev","Number","isFinite","hasNext","InboxModern","_s","navigate","me","JSON","parse","localStorage","getItem","myEmail","email","myName","kullanici","trim","view","setView","q","setQ","onlySLA","setOnlySLA","loading","setLoading","saving","setSaving","dirty","setDirty","msg","setMsg","err","setErr","rows","setRows","active","setActive","descDraft","setDescDraft","noteDraft","setNoteDraft","drawerSaving","setDrawerSaving","replace","fetchData","channel","on","event","schema","table","payload","applyRealtime","subscribe","removeChannel","sortRows","_active$aciklama","_active$kullanici_not","aciklama","kullanici_notu","query","from","select","eq","order","ascending","nullsFirst","t24","Date","now","toISOString","lt","not","data","error","limit","e","console","groupByStatus","items","map","Object","fromEntries","c","forEach","i","durum","push","k","keys","sort","a","b","_a$kolon_sira","_b$kolon_sira","kolon_sira","updateRow","id","changes","update","guncelleme_tarihi","message","onBoardDragEnd","result","_dstArr","_dstArr2","source","destination","draggableId","byStatus","srcArr","droppableId","dstArr","idx","findIndex","String","item","atanan_email","splice","destIndex","index","newKolonSira","newDurum","prevRows","r","onListDragEnd","listMine","filtered","moved","to","orderMap","Map","nextRows","has","atanan_sira","get","saveOrder","ids","length","rpc","p_email","p_ids","upErr","moveTo","statusKey","_dst","row","find","dst","last","undefined","markDone","handleLogout","removeItem","filter","text","baslik","talep_eden_email","talep_eden_kullanici","atanan_kullanici","toLowerCase","includes","grouped","saveDrawerFields","_active$aciklama2","_active$kullanici_not2","ok","nowIso","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","type","checked","disabled","onDragEnd","col","provided","ref","innerRef","droppableProps","slug","isDragDisabled","pp","draggableProps","dragHandleProps","Card","onOpen","_r$atanan_sira","_r$atanan_sira2","style","minWidth","textAlign","opacity","marginRight","oncelik","marginLeft","fmtTime","padding","role","stopPropagation","sla_son_tarih","getTime","Section","_active$aciklama3","_active$kullanici_not3","marginTop","bitis_tarihi","fmtDate","_c","mine","_c2","_c3","s","replaceAll","ts","toLocaleString","toLocaleDateString","dateNum","v","list","x","y","_x$atanan_sira","_y$atanan_sira","_x$id","_y$id","ax","ay","tx","_x$kolon_sira","_y$kolon_sira","_x$id2","_y$id2","kx","ky","eventType","_payload$old","old","new","_prev$","$RefreshReg$"],"sources":["C:/Users/Gorkem.Cadirci/talep-sistemi/src/pages/Inbox.js"],"sourcesContent":["// src/pages/Inbox.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\r\nimport supabase from \"../supabaseClient\";\r\nimport \"./Inbox.css\";\r\n\r\n/* ---- DURUM KODLARI (DB ile birebir) ---- */\r\nconst STATUS = {\r\n    Yeni: \"Yeni\",\r\n    SirayaAlindi: \"SirayaAlindi\",\r\n    IslemeAlindi: \"IslemeAlindi\",\r\n    TestEdiliyor: \"TestEdiliyor\",\r\n    Tamamlandi: \"Tamamlandi\",\r\n};\r\n\r\nconst STATUS_DISPLAY = {\r\n    [STATUS.Yeni]: \"Yeni\",\r\n    [STATUS.SirayaAlindi]: \"Sıraya Alındı\",\r\n    [STATUS.IslemeAlindi]: \"İşleme Alındı\",\r\n    [STATUS.TestEdiliyor]: \"Test Ediliyor\",\r\n    [STATUS.Tamamlandi]: \"Tamamlandı\",\r\n};\r\n\r\nconst BOARD_COLUMNS = [\r\n    { key: STATUS.Yeni, title: STATUS_DISPLAY[STATUS.Yeni] },\r\n    { key: STATUS.SirayaAlindi, title: STATUS_DISPLAY[STATUS.SirayaAlindi] },\r\n    { key: STATUS.IslemeAlindi, title: STATUS_DISPLAY[STATUS.IslemeAlindi] },\r\n    { key: STATUS.TestEdiliyor, title: STATUS_DISPLAY[STATUS.TestEdiliyor] },\r\n    { key: STATUS.Tamamlandi, title: STATUS_DISPLAY[STATUS.Tamamlandi] },\r\n];\r\n\r\nconst PILL_COLOR = { P1: \"p1\", P2: \"p2\", P3: \"p3\" };\r\n\r\n/* ---- Tek kayıt sıralama: araya yerleştir (lokal) ---- */\r\nconst GAP = 1000;\r\nfunction between(prev, next) {\r\n    const hasPrev = Number.isFinite(prev);\r\n    const hasNext = Number.isFinite(next);\r\n    if (hasPrev && hasNext) return (prev + next) / 2;\r\n    if (hasPrev && !hasNext) return prev + GAP;\r\n    if (!hasPrev && hasNext) return next - GAP;\r\n    return GAP;\r\n}\r\n\r\nexport default function InboxModern() {\r\n    const navigate = useNavigate();\r\n\r\n    const me = useMemo(() => {\r\n        try {\r\n            return JSON.parse(localStorage.getItem(\"user_profile\") || \"{}\");\r\n        } catch {\r\n            return {};\r\n        }\r\n    }, []);\r\n    const myEmail = me?.email || \"\";\r\n    const myName = (me?.kullanici || \"\").trim();\r\n\r\n    const [view, setView] = useState(\"board\"); // \"board\" | \"list\"\r\n    const [q, setQ] = useState(\"\");\r\n    const [onlySLA, setOnlySLA] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const [dirty, setDirty] = useState(false); // Liste'de değişiklik var mı?\r\n    const [msg, setMsg] = useState(\"\"); // bilgi mesajı\r\n    const [err, setErr] = useState(\"\");\r\n    const [rows, setRows] = useState([]);\r\n    const [active, setActive] = useState(null);\r\n\r\n    // Drawer içindeki form state'leri\r\n    const [descDraft, setDescDraft] = useState(\"\");\r\n    const [noteDraft, setNoteDraft] = useState(\"\");\r\n    const [drawerSaving, setDrawerSaving] = useState(false);\r\n\r\n    // guard\r\n    useEffect(() => {\r\n        if (!localStorage.getItem(\"auth_token\")) navigate(\"/login\", { replace: true });\r\n    }, [navigate]);\r\n\r\n    // data\r\n    useEffect(() => {\r\n        fetchData();\r\n        setDirty(false);\r\n        setMsg(\"\");\r\n        // eslint-disable-next-line\r\n    }, [onlySLA, view]);\r\n\r\n    // realtime\r\n    useEffect(() => {\r\n        const channel = supabase\r\n            .channel(\"talepler-realtime\")\r\n            .on(\r\n                \"postgres_changes\",\r\n                { event: \"*\", schema: \"public\", table: \"talepler\" },\r\n                (payload) => setRows((prev) => applyRealtime(prev, payload))\r\n            )\r\n            .subscribe();\r\n        return () => supabase.removeChannel(channel);\r\n    }, []);\r\n\r\n    // görünüm değişince sırala\r\n    useEffect(() => {\r\n        setRows((prev) => sortRows(prev, view));\r\n    }, [view]);\r\n\r\n    // aktif kayıt değişince drawer form alanlarını doldur\r\n    useEffect(() => {\r\n        if (active) {\r\n            setDescDraft(active.aciklama ?? \"\");\r\n            setNoteDraft(active.kullanici_notu ?? \"\");\r\n        } else {\r\n            setDescDraft(\"\");\r\n            setNoteDraft(\"\");\r\n        }\r\n    }, [active]);\r\n\r\n    async function fetchData() {\r\n        if (!myEmail) return;\r\n        setLoading(true);\r\n        setErr(\"\");\r\n        try {\r\n            // SADECE bana atanan kayıtlar\r\n            let query = supabase.from(\"talepler\").select(\"*\").eq(\"atanan_email\", myEmail);\r\n\r\n            // Sıralama: Liste görünümünde kişisel sıra, Kanban'da kolon_sira\r\n            if (view === \"list\") {\r\n                query = query\r\n                    .order(\"atanan_sira\", { ascending: true, nullsFirst: false })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            } else {\r\n                query = query\r\n                    .order(\"kolon_sira\", { ascending: true, nullsFirst: true })\r\n                    .order(\"guncelleme_tarihi\", { ascending: false });\r\n            }\r\n\r\n            if (onlySLA) {\r\n                const t24 = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();\r\n                query = query.lt(\"sla_son_tarih\", t24).not(\"durum\", \"in\", '(\"Tamamlandi\",\"Reddedildi\")');\r\n            }\r\n\r\n            const { data, error } = await query.limit(500);\r\n            if (error) throw error;\r\n\r\n            setRows(sortRows(data || [], view));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Kayıtlar çekilemedi.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    /* ---------- helpers ---------- */\r\n    function groupByStatus(items) {\r\n        const map = Object.fromEntries(BOARD_COLUMNS.map((c) => [c.key, []]));\r\n        items.forEach((i) => {\r\n            (map[i.durum || STATUS.Yeni] ??= []).push(i);\r\n        });\r\n        for (const k of Object.keys(map)) {\r\n            map[k].sort((a, b) => (a.kolon_sira ?? 1e15) - (b.kolon_sira ?? 1e15));\r\n        }\r\n        return map;\r\n    }\r\n\r\n    async function updateRow(id, changes) {\r\n        setSaving(true);\r\n        const { error } = await supabase\r\n            .from(\"talepler\")\r\n            .update({ ...changes, guncelleme_tarihi: new Date().toISOString() })\r\n            .eq(\"id\", id)\r\n            .eq(\"atanan_email\", myEmail); // güvenlik\r\n        setSaving(false);\r\n        if (error) {\r\n            console.error(\"updateRow error\", error);\r\n            setErr(error.message || \"Güncelleme başarısız.\");\r\n            fetchData();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /* ---------- DnD: Kanban (tek kayıt — anında kaydet) ---------- */\r\n    async function onBoardDragEnd(result) {\r\n        const { source, destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        const byStatus = groupByStatus([...rows]);\r\n        const srcArr = byStatus[source.droppableId];\r\n        const dstArr = byStatus[destination.droppableId];\r\n\r\n        const idx = srcArr.findIndex((i) => String(i.id) === String(draggableId));\r\n        if (idx === -1) return;\r\n\r\n        const item = srcArr[idx];\r\n\r\n        if (item.atanan_email !== myEmail) {\r\n            setErr(\"Bu kart size ait değil.\");\r\n            return;\r\n        }\r\n\r\n        // UI\r\n        srcArr.splice(idx, 1);\r\n        const destIndex = destination.index;\r\n        dstArr.splice(destIndex, 0, item);\r\n\r\n        const prev = dstArr[destIndex - 1]?.kolon_sira;\r\n        const next = dstArr[destIndex + 1]?.kolon_sira;\r\n        const newKolonSira = between(prev, next);\r\n        const newDurum = destination.droppableId;\r\n\r\n        setRows((prevRows) =>\r\n            sortRows(\r\n                prevRows.map((r) => (r.id === item.id ? { ...r, durum: newDurum, kolon_sira: newKolonSira } : r)),\r\n                view\r\n            )\r\n        );\r\n\r\n        await updateRow(item.id, { durum: newDurum, kolon_sira: newKolonSira });\r\n    }\r\n\r\n    /* ---------- DnD: Liste (tek kayıt — LOKAL değiştir, sonra \"Kaydet\") ---------- */\r\n    async function onListDragEnd(result) {\r\n        const { destination, draggableId } = result;\r\n        if (!destination) return;\r\n\r\n        const listMine = filtered;\r\n        const from = listMine.findIndex((i) => String(i.id) === String(draggableId));\r\n        if (from === -1) return;\r\n        const moved = listMine[from];\r\n        listMine.splice(from, 1);\r\n        const to = destination.index;\r\n        listMine.splice(to, 0, moved);\r\n\r\n        setRows((prevRows) => {\r\n            const orderMap = new Map(listMine.map((r, i) => [r.id, i + 1]));\r\n            const nextRows = prevRows.map((r) => (orderMap.has(r.id) ? { ...r, atanan_sira: orderMap.get(r.id) } : r));\r\n            return sortRows(nextRows, view);\r\n        });\r\n\r\n        setDirty(true);\r\n        setMsg(\"Kişisel kuyruğunda kaydedilmemiş değişiklikler var.\");\r\n    }\r\n\r\n    /* ---------- \"Sırayı Kaydet\" (kişisel) ---------- */\r\n    async function saveOrder() {\r\n        if (view !== \"list\") return;\r\n\r\n        try {\r\n            setSaving(true);\r\n            setErr(\"\");\r\n            setMsg(\"\");\r\n\r\n            const ids = filtered.map((r) => Number(r.id));\r\n            if (ids.length === 0) return;\r\n\r\n            const { error } = await supabase.rpc(\"set_assignee_order\", { p_email: myEmail, p_ids: ids });\r\n            if (error) {\r\n                // Fallback: 1..N olarak atanan_sira yaz\r\n                for (let i = 0; i < ids.length; i++) {\r\n                    const id = ids[i];\r\n                    const { error: upErr } = await supabase\r\n                        .from(\"talepler\")\r\n                        .update({ atanan_sira: i + 1, guncelleme_tarihi: new Date().toISOString() })\r\n                        .eq(\"id\", id)\r\n                        .eq(\"atanan_email\", myEmail);\r\n                    if (upErr) throw upErr;\r\n                }\r\n            }\r\n            setMsg(\"Kişisel sıra kaydedildi.\");\r\n            setDirty(false);\r\n            await fetchData();\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Sıralama kaydedilemedi.\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    }\r\n\r\n    /* ---------- hızlı işlemler (anında kaydet) ---------- */\r\n    async function moveTo(id, statusKey) {\r\n        const row = rows.find((r) => r.id === id);\r\n        if (!row || row.atanan_email !== myEmail) {\r\n            setErr(\"Bu kayıt size ait değil.\");\r\n            return;\r\n        }\r\n\r\n        const byStatus = groupByStatus(rows);\r\n        const dst = byStatus[statusKey];\r\n        const last = dst[dst.length - 1]?.kolon_sira;\r\n        const newKolonSira = between(last, undefined);\r\n\r\n        setRows((prevRows) =>\r\n            sortRows(prevRows.map((r) => (r.id === id ? { ...r, durum: statusKey, kolon_sira: newKolonSira } : r)), view)\r\n        );\r\n\r\n        await updateRow(id, { durum: statusKey, kolon_sira: newKolonSira });\r\n    }\r\n\r\n    async function markDone(id) {\r\n        await moveTo(id, STATUS.Tamamlandi);\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(\"auth_token\");\r\n        localStorage.removeItem(\"user_profile\");\r\n        navigate(\"/login\", { replace: true });\r\n    }\r\n\r\n    /* ---------- filter ---------- */\r\n    const filtered = rows.filter((r) => {\r\n        if (!q) return true;\r\n        const text = `${r.id} ${r.baslik} ${r.talep_eden_email} ${r.atanan_email || \"\"} ${r.talep_eden_kullanici || \"\"} ${r.atanan_kullanici || \"\"}`.toLowerCase();\r\n        return text.includes(q.toLowerCase());\r\n    });\r\n\r\n    const grouped = groupByStatus(filtered);\r\n\r\n    // Drawer kaydet\r\n    async function saveDrawerFields() {\r\n        if (!active) return;\r\n        if (active.atanan_email !== myEmail) {\r\n            setErr(\"Bu kayıt size ait değil.\");\r\n            return;\r\n        }\r\n        try {\r\n            setDrawerSaving(true);\r\n            const changes = {};\r\n            if (descDraft !== (active.aciklama ?? \"\")) changes.aciklama = descDraft.trim() || null;\r\n            if (noteDraft !== (active.kullanici_notu ?? \"\")) changes.kullanici_notu = noteDraft.trim() || null;\r\n\r\n            if (Object.keys(changes).length === 0) {\r\n                setMsg(\"Değişiklik yok.\");\r\n                return;\r\n            }\r\n\r\n            const ok = await updateRow(active.id, changes);\r\n            if (ok) {\r\n                // Lokal state'i güncelle\r\n                const nowIso = new Date().toISOString();\r\n                setRows((prev) => prev.map((r) => (r.id === active.id ? { ...r, ...changes, guncelleme_tarihi: nowIso } : r)));\r\n                setActive((prev) => (prev ? { ...prev, ...changes, guncelleme_tarihi: nowIso } : prev));\r\n                setMsg(\"Kaydedildi.\");\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            setErr(\"Değişiklikler kaydedilemedi.\");\r\n        } finally {\r\n            setDrawerSaving(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"mx\">\r\n            <div className=\"mx-top\">\r\n                <div className=\"brand\">\r\n                    <div className=\"logo\">🧭</div>\r\n                    <div className=\"bt\">\r\n                        <h1>Gelen Kutusu</h1>\r\n                        <span className=\"muted\">Sadece size atanan işler</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"cmd\">\r\n                    <div className=\"seg\">\r\n                        <button className={`seg-btn ${view === \"board\" ? \"on\" : \"\"}`} onClick={() => setView(\"board\")}>\r\n                            Kanban\r\n                        </button>\r\n                        <button className={`seg-btn ${view === \"list\" ? \"on\" : \"\"}`} onClick={() => setView(\"list\")}>\r\n                            Liste\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"search-wrap\">\r\n                        <input\r\n                            className=\"search\"\r\n                            placeholder=\"Ara: #id, başlık, kişi…\"\r\n                            value={q}\r\n                            onChange={(e) => setQ(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"toggles\">\r\n                        <label className=\"toggle\">\r\n                            <input type=\"checkbox\" checked={onlySLA} onChange={(e) => setOnlySLA(e.target.checked)} />\r\n                            <span>SLA (&lt;24s)</span>\r\n                        </label>\r\n                    </div>\r\n\r\n                    {view === \"list\" && (\r\n                        <button\r\n                            className={`btn ${dirty ? \"primary\" : \"ghost\"}`}\r\n                            onClick={saveOrder}\r\n                            disabled={!dirty || saving}\r\n                            title=\"Kişisel sıranı kaydet\"\r\n                        >\r\n                            Sıramı Kaydet\r\n                        </button>\r\n                    )}\r\n\r\n                    <Link to=\"/newrequest\" className=\"btn primary\">\r\n                        + Yeni Talep\r\n                    </Link>\r\n                    <div className=\"chip\">{(me?.kullanici || me?.email) || \"\"}</div>\r\n                    <button className=\"btn danger\" onClick={handleLogout}>\r\n                        Çıkış\r\n                    </button>\r\n                    {saving && <div className=\"saving-ind\">Kaydediliyor…</div>}\r\n                </div>\r\n            </div>\r\n\r\n            {err && <div className=\"mx-alert err\">{err}</div>}\r\n            {msg && !err && <div className=\"mx-alert ok\">{msg}</div>}\r\n\r\n            {loading ? (\r\n                <div className=\"mx-skel\">Yükleniyor…</div>\r\n            ) : view === \"board\" ? (\r\n                <DragDropContext onDragEnd={onBoardDragEnd}>\r\n                    <div className=\"board\">\r\n                        {BOARD_COLUMNS.map((col) => {\r\n                            const items = grouped[col.key] || [];\r\n                            return (\r\n                                <Droppable droppableId={col.key} key={col.key}>\r\n                                    {(provided) => (\r\n                                        <div className=\"col\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                            <div className=\"col-head\">\r\n                                                <span className={`dot s-${slug(col.title)}`}></span>\r\n                                                <h3>{col.title}</h3>\r\n                                                <span className=\"count\">{items.length}</span>\r\n                                            </div>\r\n                                            <div className=\"col-body\">\r\n                                                {items.length === 0 && <div className=\"col-empty\">Henüz kayıt yok</div>}\r\n                                                {items.map((item, index) => (\r\n                                                    <Draggable\r\n                                                        draggableId={String(item.id)}\r\n                                                        index={index}\r\n                                                        key={item.id}\r\n                                                        isDragDisabled={item.atanan_email !== myEmail}\r\n                                                    >\r\n                                                        {(pp) => (\r\n                                                            <div ref={pp.innerRef} {...pp.draggableProps} {...pp.dragHandleProps}>\r\n                                                                <Card data={item} onOpen={() => setActive(item)} me={myEmail} />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </Draggable>\r\n                                                ))}\r\n                                                {provided.placeholder}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </DragDropContext>\r\n            ) : (\r\n                <DragDropContext onDragEnd={onListDragEnd}>\r\n                    <Droppable droppableId=\"listMine\">\r\n                        {(provided) => (\r\n                            <div className=\"listv\" ref={provided.innerRef} {...provided.droppableProps}>\r\n                                {filtered.length === 0 && <div className=\"col-empty\">Kayıt bulunamadı</div>}\r\n                                {filtered.map((r, index) => (\r\n                                    <Draggable draggableId={String(r.id)} index={index} key={r.id}>\r\n                                        {(pp) => (\r\n                                            <div\r\n                                                ref={pp.innerRef}\r\n                                                {...pp.draggableProps}\r\n                                                {...pp.dragHandleProps}\r\n                                                className=\"rowv\"\r\n                                                onClick={() => setActive(r)}\r\n                                            >\r\n                                                <span\r\n                                                    className=\"r-idx\"\r\n                                                    style={{ minWidth: 24, textAlign: \"right\", opacity: 0.7, marginRight: 8 }}\r\n                                                >\r\n                                                    {r.atanan_sira ?? index + 1}\r\n                                                </span>\r\n                                                <span className={`pill ${PILL_COLOR[r.oncelik] || \"p3\"}`}>{r.oncelik || \"P3\"}</span>\r\n                                                <span className={`badge s-${slug(STATUS_DISPLAY[r.durum] || \"Yeni\")}`}>\r\n                                                    {STATUS_DISPLAY[r.durum] || \"Yeni\"}\r\n                                                </span>\r\n                                                <span className=\"r-title\">\r\n                                                    #{r.id} — {r.baslik}\r\n                                                </span>\r\n                                                <span className=\"r-sub\">\r\n                                                    {(r.talep_eden_kullanici || r.talep_eden_email) || \"—\"} → {(r.atanan_kullanici || r.atanan_email) || \"—\"}\r\n                                                    <b style={{ marginLeft: 8, opacity: 0.8 }}>(Sıra: {r.atanan_sira ?? \"—\"})</b>\r\n                                                </span>\r\n                                                <span className=\"r-time\">{fmtTime(r.guncelleme_tarihi)}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </Draggable>\r\n                                ))}\r\n                                {provided.placeholder}\r\n                                <div className=\"hint\" style={{ padding: 8, opacity: 0.7 }}>\r\n                                    {dirty\r\n                                        ? \"Kaydet'e basarak kişisel sıralamayı kalıcı hale getir.\"\r\n                                        : \"Bu listede sürüklediğin sıra sadece senin kuyruğunu etkiler (Kaydet ile).\"}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </Droppable>\r\n                </DragDropContext>\r\n            )}\r\n\r\n            {/* Detay çekmecesi */}\r\n            {active && (\r\n                <div className=\"drawer\" role=\"dialog\" aria-modal=\"true\">\r\n                    {/* KAPATMA: boş alana tıklayınca kapanır */}\r\n                    <div className=\"drawer-backdrop\" onClick={() => setActive(null)} />\r\n                    {/* PANEL: tıklamalar buble edip backdrop'a gitmesin */}\r\n                    <div className=\"drawer-panel\" onClick={(e) => e.stopPropagation()}>\r\n                        <button className=\"drawer-close\" onClick={() => setActive(null)}>×</button>\r\n\r\n                        <div className=\"drawer-top\">\r\n                            <span className={`pill ${PILL_COLOR[active.oncelik] || \"p3\"}`}>{active.oncelik || \"P3\"}</span>\r\n                            <span className={`badge s-${slug(STATUS_DISPLAY[active.durum] || \"Yeni\")}`}>\r\n                                {STATUS_DISPLAY[active.durum] || \"Yeni\"}\r\n                            </span>\r\n                            {active.sla_son_tarih &&\r\n                                new Date(active.sla_son_tarih).getTime() - Date.now() < 24 * 60 * 60 * 1000 && (\r\n                                    <span className=\"sla\">SLA</span>\r\n                                )}\r\n                            <h2>\r\n                                #{active.id} — {active.baslik}\r\n                            </h2>\r\n                            <div className=\"d-sub\">\r\n                                <span>\r\n                                    İsteyen: <b>{active.talep_eden_kullanici || active.talep_eden_email}</b>\r\n                                </span>\r\n                                <span> · </span>\r\n                                <span>\r\n                                    Atanan: <b>{active.atanan_kullanici || active.atanan_email || \"—\"}</b>\r\n                                </span>\r\n                                <span> · </span>\r\n                                <span>Güncellendi: {fmtTime(active.guncelleme_tarihi)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"drawer-body\">\r\n                            {/* AÇIKLAMA (DÜZENLENEBİLİR) */}\r\n                            <Section title=\"Açıklama (düzenlenebilir)\">\r\n                                <textarea\r\n                                    className=\"input texta\"\r\n                                    value={descDraft}\r\n                                    onChange={(e) => setDescDraft(e.target.value)}\r\n                                    placeholder=\"Talebin açıklaması…\"\r\n                                    rows={5}\r\n                                />\r\n                                <div className=\"act-row\">\r\n                                    <button\r\n                                        className=\"btn primary\"\r\n                                        onClick={saveDrawerFields}\r\n                                        disabled={drawerSaving}\r\n                                        title=\"Açıklama ve kişisel notu kaydet\"\r\n                                    >\r\n                                        Kaydet\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => {\r\n                                            setDescDraft(active.aciklama ?? \"\");\r\n                                            setNoteDraft(active.kullanici_notu ?? \"\");\r\n                                        }}\r\n                                        disabled={drawerSaving}\r\n                                    >\r\n                                        Geri Al\r\n                                    </button>\r\n                                    {drawerSaving && <span className=\"saving-ind\" style={{ marginLeft: 8 }}>Kaydediliyor…</span>}\r\n                                </div>\r\n                            </Section>\r\n\r\n                            {/* KİŞİSEL NOT */}\r\n                            <Section title=\"Kişisel Notum\">\r\n                                <textarea\r\n                                    className=\"input texta\"\r\n                                    value={noteDraft}\r\n                                    onChange={(e) => setNoteDraft(e.target.value)}\r\n                                    placeholder=\"Bu talep hakkında kendine not bırak… (yalnızca sen görürsün)\"\r\n                                    rows={4}\r\n                                />\r\n                                <div className=\"muted\" style={{ marginTop: 6 }}>\r\n                                    Bu alan <b>kullanici_notu</b> sütununda saklanır ve yalnızca bu işi üstlenen kullanıcı için anlamlıdır.\r\n                                </div>\r\n                            </Section>\r\n\r\n                            {/* Hızlı İşlemler */}\r\n                            <Section title=\"Hızlı İşlemler\">\r\n                                <div className=\"act-grid\">\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => {\r\n                                            if (active.atanan_email === myEmail) {\r\n                                                setActive(null);\r\n                                                moveTo(active.id, STATUS.SirayaAlindi);\r\n                                            }\r\n                                        }}\r\n                                        disabled={active.atanan_email !== myEmail}\r\n                                    >\r\n                                        Sıraya alındı\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => {\r\n                                            if (active.atanan_email === myEmail) {\r\n                                                setActive(null);\r\n                                                moveTo(active.id, STATUS.IslemeAlindi);\r\n                                            }\r\n                                        }}\r\n                                        disabled={active.atanan_email !== myEmail}\r\n                                    >\r\n                                        İşleme alındı\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"btn ghost\"\r\n                                        onClick={() => {\r\n                                            if (active.atanan_email === myEmail) {\r\n                                                setActive(null);\r\n                                                moveTo(active.id, STATUS.TestEdiliyor);\r\n                                            }\r\n                                        }}\r\n                                        disabled={active.atanan_email !== myEmail}\r\n                                    >\r\n                                        Test ediliyor\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"btn primary\"\r\n                                        onClick={() => {\r\n                                            if (active.atanan_email === myEmail) {\r\n                                                setActive(null);\r\n                                                markDone(active.id);\r\n                                            }\r\n                                        }}\r\n                                        disabled={active.atanan_email !== myEmail}\r\n                                    >\r\n                                        ✓ Tamamlandı\r\n                                    </button>\r\n                                </div>\r\n                            </Section>\r\n\r\n                            <Section title=\"Zaman\">\r\n                                <div className=\"kv\">\r\n                                    <div>\r\n                                        <span>Hedef Tarih:</span>\r\n                                        <b>{active.bitis_tarihi ? fmtDate(active.bitis_tarihi) : \"—\"}</b>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span>SLA Son:</span>\r\n                                        <b>{active.sla_son_tarih ? fmtDate(active.sla_son_tarih) : \"—\"}</b>\r\n                                    </div>\r\n                                </div>\r\n                            </Section>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/* components */\r\nfunction Card({ data, onOpen, me }) {\r\n    const mine = data.atanan_email && data.atanan_email === me;\r\n    return (\r\n        <div className={`card ${mine ? \"mine\" : \"\"}`} onClick={onOpen}>\r\n            <div className=\"c-title\">\r\n                #{data.id} — {data.baslik}\r\n            </div>\r\n            <div className=\"c-desc\">{data.aciklama || \"—\"}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Section({ title, children }) {\r\n    return (\r\n        <section className=\"sec\">\r\n            <div className=\"sec-h\">\r\n                <h4>{title}</h4>\r\n            </div>\r\n            <div className=\"sec-b\">{children}</div>\r\n        </section>\r\n    );\r\n}\r\n\r\n/* utils */\r\nfunction slug(s) {\r\n    return (s || \"\")\r\n        .toLowerCase()\r\n        .replaceAll(\"ı\", \"i\")\r\n        .replaceAll(\"ğ\", \"g\")\r\n        .replaceAll(\"ş\", \"s\")\r\n        .replaceAll(\"ö\", \"o\")\r\n        .replaceAll(\"ç\", \"c\")\r\n        .replaceAll(\"ü\", \"u\")\r\n        .replace(/\\s+/g, \"-\");\r\n}\r\nfunction fmtTime(ts) {\r\n    try {\r\n        return new Date(ts).toLocaleString();\r\n    } catch {\r\n        return \"—\";\r\n    }\r\n}\r\nfunction fmtDate(ts) {\r\n    try {\r\n        return new Date(ts).toLocaleDateString();\r\n    } catch {\r\n        return \"—\";\r\n    }\r\n}\r\n\r\n/* ------ realtime yardımcıları ------ */\r\nfunction dateNum(v) {\r\n    try {\r\n        return new Date(v).getTime() || 0;\r\n    } catch {\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction sortRows(list, view) {\r\n    const a = [...(list || [])];\r\n    if (view === \"list\") {\r\n        a.sort((x, y) => {\r\n            const ax = x.atanan_sira ?? 1e15;\r\n            const ay = y.atanan_sira ?? 1e15;\r\n            if (ax !== ay) return ax - ay;\r\n            const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\r\n            if (tx !== 0) return tx;\r\n            return (x.id ?? 0) - (y.id ?? 0);\r\n        });\r\n    } else {\r\n        a.sort((x, y) => {\r\n            const kx = x.kolon_sira ?? 1e15;\r\n            const ky = y.kolon_sira ?? 1e15;\r\n            if (kx !== ky) return kx - ky;\r\n            const tx = dateNum(y.guncelleme_tarihi) - dateNum(x.guncelleme_tarihi);\r\n            if (tx !== 0) return tx;\r\n            return (x.id ?? 0) - (y.id ?? 0);\r\n        });\r\n    }\r\n    return a;\r\n}\r\n\r\nfunction applyRealtime(prev, payload) {\r\n    const type = payload.eventType;\r\n    const next = [...prev];\r\n\r\n    if (type === \"DELETE\") {\r\n        return next.filter((r) => r.id !== payload.old?.id);\r\n    }\r\n\r\n    const row = payload.new;\r\n    // Bana ait değilse listeye sokma\r\n    if (row?.atanan_email && prev.length > 0) {\r\n        const myEmail = prev[0]?.atanan_email;\r\n        if (row.atanan_email !== myEmail) return prev;\r\n    }\r\n\r\n    const i = next.findIndex((r) => r.id === row.id);\r\n    if (i === -1) next.push(row);\r\n    else next[i] = { ...next[i], ...row };\r\n    return sortRows(next, \"board\");\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}